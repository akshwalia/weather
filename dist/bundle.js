(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var c=n.getElementsByTagName("script");if(c.length)for(var a=c.length-1;a>-1&&!t;)t=c[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"9d129110dad380795766.png",n=e.p+"30b61f2d2b3761b7dd79.png",c=e.p+"763d9f709af860fa49c6.png",a=e.p+"e22a54b5b4a5ff085fc2.png",s=e.p+"dc758041c1a42a676c83.png",r=e.p+"dddc033163ec198b80e4.png",d=e.p+"9bacc13ba563765c1022.png",i=e.p+"bfa052d4ba0ad0353290.png",o=e.p+"c6ef75775cb48997b919.png",l=e.p+"c90f38a38a64ceba12de.png",m=e.p+"8af0012d8baf65a404d2.png",u=e.p+"66245a4e8b3e930e3a92.png",p=e.p+"3190cd4d6b0f6bf582f5.png",y=e.p+"e084c7323a6f30ebee93.png",g=e.p+"7e2b4db19a47e253a4ae.png";function f(e,f){(e=e.toLowerCase()).includes("sunny")||"clear"==e?f.src=y:e.includes("cloudy")?e.includes("partly")?f.src=m:f.src=n:"overcast"==e?f.src=l:e.includes("thunder")?f.src=g:e.includes("pellets")?f.src=r:"blizzard"==e?f.src=t:e.includes("fog")?f.src=s:"mist"==e?f.src=o:e.includes("rain")?e.includes("light")?f.src=c:e.includes("moderate")?f.src=i:e.includes("heavy")?f.src=d:e.includes("freezing")?f.src=a:f.src=c:e.includes("snow")?f.src=p:e.includes("sleet")&&(f.src=u)}const h=document.querySelector(".forecastcontainer"),E=document.querySelector(".hourlycontainer"),v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],L=document.getElementById("currentweathertext"),b=document.getElementById("location"),M=document.getElementById("date"),T=document.getElementById("time"),B=document.getElementById("currenttemp"),I=document.getElementById("todayicon"),H=document.getElementById("hightemp"),w=document.getElementById("lowtemp"),_=document.getElementById("feelslike"),C=document.getElementById("precipitationvalue"),k=document.getElementById("humidityvalue"),$=document.getElementById("windvalue"),S=document.getElementById("pressurevalue"),x=document.getElementById("sunrise"),F=document.getElementById("sunset"),D=document.getElementById("moonphase"),N=document.getElementById("dailybutton"),A=document.getElementById("hourlybutton");function q(e,t,n){L.innerHTML=e.current.condition.text,b.innerHTML=e.location.name+", "+e.location.country,M.innerHTML=new Date(e.current.last_updated).toDateString(),T.innerHTML=new Date(e.current.last_updated).toLocaleTimeString().substring(0,5)+" (Last Updated)","cel"==t?(B.innerHTML=e.current.temp_c+"°C",H.innerHTML=e.forecast.forecastday[0].day.maxtemp_c+"°C",w.innerHTML=e.forecast.forecastday[0].day.mintemp_c+"°C",_.innerHTML=e.current.feelslike_c+"°C"):(B.innerHTML=e.current.temp_f+"°F",H.innerHTML=e.forecast.forecastday[0].day.maxtemp_f+"°F",w.innerHTML=e.forecast.forecastday[0].day.mintemp_f+"°F",_.innerHTML=e.current.feelslike_f+"°F"),C.innerHTML=e.forecast.forecastday[0].day.daily_chance_of_rain+"%",k.innerHTML=e.current.humidity+"%",$.innerHTML=e.current.wind_mph+"mph  "+e.current.wind_dir,S.innerHTML=e.current.pressure_mb+"mb",x.innerHTML=e.forecast.forecastday[0].astro.sunrise,F.innerHTML=e.forecast.forecastday[0].astro.sunset,D.innerHTML=e.forecast.forecastday[0].astro.moon_phase,f(e.current.condition.text,I),N.classList.contains("selected")&&function(e,t,n){h.innerHTML="",E.innerHTML="";for(let n=1;n<=3;n++){const c=document.createElement("div"),a=document.createElement("div");a.className="day",a.innerHTML=v[new Date(e.forecast.forecastday[n].date).getDay()];const s=document.createElement("div");s.className="high";const r=document.createElement("div");r.className="low";const d=document.createElement("img");"cel"==t?(s.innerHTML=e.forecast.forecastday[n].day.maxtemp_c+"°C",r.innerHTML=e.forecast.forecastday[n].day.mintemp_c+"°C"):(s.innerHTML=e.forecast.forecastday[n].day.maxtemp_f+"°F",r.innerHTML=e.forecast.forecastday[n].day.mintemp_f+"°F"),f(e.forecast.forecastday[n].day.condition.text,d),c.appendChild(a),c.appendChild(s),c.appendChild(r),c.appendChild(d),h.appendChild(c)}}(e,t),A.classList.contains("selected")&&function(e,t,n){let c=1,a=!1;h.innerHTML="",E.innerHTML="";let s=new Date(e.current.last_updated).toLocaleTimeString().substring(0,2);for(s=Number(s);;){for(let r=s+6*(n-1);r<=23;r++){const n=document.createElement("div"),s=document.createElement("div");s.innerHTML=0==r?"12:00 AM":r<=12?r+":00 AM":r-12+":00 PM";const d=document.createElement("div");d.className="high",d.innerHTML="cel"==t?e.forecast.forecastday[0].hour[r].temp_c+"°C":e.forecast.forecastday[0].hour[r].temp_f+"°F";const i=document.createElement("img");if(f(e.forecast.forecastday[0].hour[r].condition.text,i),n.appendChild(s),n.appendChild(d),n.appendChild(i),E.appendChild(n),6==c){a=!0;break}c++}if(a)break;let r=s+6*(n-1)-24;r<0&&(r=0);for(let n=0+r;n<=23;n++){const s=document.createElement("div"),r=document.createElement("div");r.innerHTML=0==n?"12:00 AM":n<=12?n+":00 AM":n-12+":00 PM";const d=document.createElement("div");d.className="high",d.innerHTML="cel"==t?e.forecast.forecastday[1].hour[n].temp_c+"°C":e.forecast.forecastday[1].hour[n].temp_f+"°F";const i=document.createElement("img");if(f(e.forecast.forecastday[1].hour[n].condition.text,i),s.appendChild(r),s.appendChild(d),s.appendChild(i),E.appendChild(s),6==c){a=!0;break}c++}if(a)break}}(e,t,n)}async function j(e,t,n){const c="https://api.weatherapi.com/v1/forecast.json?key=1370a7ea90ac4b99baf223053231408&days=4&q="+e,a=await fetch(c,{mode:"cors"}),s=await a.json();return console.log(s),s}const z=document.getElementById("searchbox"),P=document.getElementById("searchbutton"),U=document.getElementById("units"),W=document.getElementById("dailybutton"),G=document.getElementById("hourlybutton"),J=document.querySelector(".navigation"),K=document.getElementById("left"),O=document.getElementById("right"),Q=document.querySelectorAll(".circles img");let R,V=1,X="cel",Y="dehradun";!async function(){R=await j("dehradun"),q(R,X,V)}(),P.addEventListener("click",(async()=>{Y=z.value,R=await j(z.value),q(R,X,V),z.value=""})),z.addEventListener("keydown",(async e=>{"Enter"==e.key&&(Y=z.value,R=await j(z.value),q(R,X,V),z.value="")})),U.addEventListener("click",(()=>{"cel"==X?(X="far",q(R,X,V),U.innerHTML="Display °C"):(X="cel",q(R,X,V),U.innerHTML="Display °F")})),W.addEventListener("click",(()=>{W.classList.contains("selected")||(G.classList.remove("selected"),W.classList.add("selected"),q(R,X),J.style.visibility="hidden",document.getElementById(`${V}`).src="assets/svgs/circle-outline.png",V=1)})),G.addEventListener("click",(async()=>{G.classList.contains("selected")||(W.classList.remove("selected"),G.classList.add("selected"),R=await j(Y),q(R,X,V),J.style.visibility="visible",document.getElementById(`${V}`).src="assets/svgs/circle.png")})),K.addEventListener("click",(()=>{1==V?(document.getElementById(`${V}`).src="assets/svgs/circle-outline.png",V=4,document.getElementById(`${V}`).src="assets/svgs/circle.png"):(document.getElementById(`${V}`).src="assets/svgs/circle-outline.png",V--,document.getElementById(`${V}`).src="assets/svgs/circle.png"),q(R,X,V)})),O.addEventListener("click",(()=>{4==V?(document.getElementById(`${V}`).src="assets/svgs/circle-outline.png",V=1,document.getElementById(`${V}`).src="assets/svgs/circle.png"):(document.getElementById(`${V}`).src="assets/svgs/circle-outline.png",V++,document.getElementById(`${V}`).src="assets/svgs/circle.png"),q(R,X,V)})),Q.forEach((e=>{e.addEventListener("click",(()=>{document.getElementById(`${V}`).src="assets/svgs/circle-outline.png",V=e.id,document.getElementById(`${V}`).src="assets/svgs/circle.png",q(R,X,V)}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U29CLGVBQWUsR0FBR29CLEtBQVN0QyxJQUFNLHlCQUMxQ21DLEVBQVd5RCxFQUFPdkQsRUFBS0MsRUFBTSxHQUNoQyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VhdGhlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWF0aGVyL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vd2VhdGhlci93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWF0aGVyLy4vc3JjL3VwZGF0ZUljb24uanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci8uL3NyYy9kaXNwbGF5Rm9yZWNhc3QuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci8uL3NyYy91cGRhdGVQYWdlLmpzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvZ2V0RGF0YS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSB7XG5cdFx0XHR2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTtcblx0XHRcdHdoaWxlIChpID4gLTEgJiYgIXNjcmlwdFVybCkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImltcG9ydCBibGl6emFyZCBmcm9tICcuL2ltYWdlcy9pY29ucy9ibGl6emFyZC5wbmcnO1xuaW1wb3J0IGNsb3VkeSBmcm9tICcuL2ltYWdlcy9pY29ucy9jbG91ZHkucG5nJztcbmltcG9ydCBkcml6emxlIGZyb20gJy4vaW1hZ2VzL2ljb25zL2RyaXp6bGUucG5nJztcbmltcG9ydCBmcmVlemluZ0RyaXp6bGUgZnJvbSAnLi9pbWFnZXMvaWNvbnMvZnJlZXppbmctZHJpenpsZS5wbmcnO1xuaW1wb3J0IGZvZyBmcm9tICcuL2ltYWdlcy9pY29ucy9mb2cucG5nJztcbmltcG9ydCBoYWlsIGZyb20gJy4vaW1hZ2VzL2ljb25zL2hhaWwucG5nJztcbmltcG9ydCBoZWF2eVJhaW4gZnJvbSAnLi9pbWFnZXMvaWNvbnMvaGVhdnktcmFpbi5wbmcnO1xuaW1wb3J0IG1vZGVyYXRlUmFpbiBmcm9tICcuL2ltYWdlcy9pY29ucy9saWdodC1yYWluLnBuZyc7XG5pbXBvcnQgbWlzdCBmcm9tICcuL2ltYWdlcy9pY29ucy9taXN0LnBuZyc7XG5pbXBvcnQgb3ZlcmNhc3QgZnJvbSAnLi9pbWFnZXMvaWNvbnMvb3ZlcmNhc3QucG5nJztcbmltcG9ydCBwYXJ0bHlDbG91ZHkgZnJvbSAnLi9pbWFnZXMvaWNvbnMvcGFydGx5LWNsb3VkeS5wbmcnO1xuaW1wb3J0IHNsZWV0IGZyb20gJy4vaW1hZ2VzL2ljb25zL3NsZWV0LnBuZyc7XG5pbXBvcnQgc25vdyBmcm9tICcuL2ltYWdlcy9pY29ucy9zbm93ZmFsbC5wbmcnO1xuaW1wb3J0IHN1biBmcm9tICcuL2ltYWdlcy9pY29ucy9zdW5ueS5wbmcnO1xuaW1wb3J0IHRodW5kZXIgZnJvbSAnLi9pbWFnZXMvaWNvbnMvdGh1bmRlci5wbmcnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1cGRhdGVJY29uKHdlYXRoZXIsIGljb24pIHtcbiAgICB3ZWF0aGVyID0gd2VhdGhlci50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ3N1bm55JykgfHwgd2VhdGhlciA9PSAnY2xlYXInKVxuICAgICAgICBpY29uLnNyYyA9IHN1bjtcbiAgICBlbHNlIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCdjbG91ZHknKSkge1xuICAgICAgICBpZiAod2VhdGhlci5pbmNsdWRlcygncGFydGx5JykpXG4gICAgICAgICAgICBpY29uLnNyYyA9IHBhcnRseUNsb3VkeTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgaWNvbi5zcmMgPSBjbG91ZHk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHdlYXRoZXIgPT0gJ292ZXJjYXN0JylcbiAgICAgICAgaWNvbi5zcmMgPSBvdmVyY2FzdDtcbiAgICBlbHNlIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCd0aHVuZGVyJykpXG4gICAgICAgIGljb24uc3JjID0gdGh1bmRlcjtcbiAgICBlbHNlIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCdwZWxsZXRzJykpXG4gICAgICAgIGljb24uc3JjID0gaGFpbDtcbiAgICBlbHNlIGlmICh3ZWF0aGVyID09ICdibGl6emFyZCcpXG4gICAgICAgIGljb24uc3JjID0gYmxpenphcmQ7XG4gICAgZWxzZSBpZiAod2VhdGhlci5pbmNsdWRlcygnZm9nJykpXG4gICAgICAgIGljb24uc3JjID0gZm9nO1xuICAgIGVsc2UgaWYgKHdlYXRoZXIgPT0gJ21pc3QnKVxuICAgICAgICBpY29uLnNyYyA9IG1pc3Q7XG4gICAgZWxzZSBpZiAod2VhdGhlci5pbmNsdWRlcygncmFpbicgfHwgd2VhdGhlci5pbmNsdWRlcygnZHJpenpsZScpKSkge1xuICAgICAgICBpZiAod2VhdGhlci5pbmNsdWRlcygnbGlnaHQnKSlcbiAgICAgICAgICAgIGljb24uc3JjID0gZHJpenpsZTtcbiAgICAgICAgZWxzZSBpZiAod2VhdGhlci5pbmNsdWRlcygnbW9kZXJhdGUnKSlcbiAgICAgICAgICAgIGljb24uc3JjID0gbW9kZXJhdGVSYWluO1xuICAgICAgICBlbHNlIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCdoZWF2eScpKVxuICAgICAgICAgICAgaWNvbi5zcmMgPSBoZWF2eVJhaW47XG4gICAgICAgIGVsc2UgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ2ZyZWV6aW5nJykpXG4gICAgICAgICAgICBpY29uLnNyYyA9IGZyZWV6aW5nRHJpenpsZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgaWNvbi5zcmMgPSBkcml6emxlO1xuICAgIH1cblxuICAgIGVsc2UgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ3Nub3cnKSlcbiAgICAgICAgaWNvbi5zcmMgPSBzbm93O1xuICAgIGVsc2UgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ3NsZWV0JykpXG4gICAgICAgIGljb24uc3JjID0gc2xlZXQ7XG5cbn0iLCJpbXBvcnQgdXBkYXRlSWNvbiBmcm9tIFwiLi91cGRhdGVJY29uXCI7XG5cbmNvbnN0IGZvcmVjYXN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcmVjYXN0Y29udGFpbmVyJyk7XG5jb25zdCBob3VybHlDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG91cmx5Y29udGFpbmVyJyk7XG5cbmNvbnN0IGRheXNPZldlZWsgPSBbXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsIFwiV2VkbmVzZGF5XCIsIFwiVGh1cnNkYXlcIiwgXCJGcmlkYXlcIiwgXCJTYXR1cmRheVwiXTtcblxuZnVuY3Rpb24gZGlzcGxheURhaWx5KG9iamVjdCx1bml0LHNsaWRlKSB7XG4gICAgZm9yZWNhc3RDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBob3VybHlDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgIGZvcihsZXQgaT0xOyBpPD0zOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICAgICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRheS5jbGFzc05hbWUgPSAnZGF5JztcbiAgICAgICAgZGF5LmlubmVySFRNTCA9IGRheXNPZldlZWtbbmV3IERhdGUob2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmRhdGUpLmdldERheSgpXTtcblxuICAgICAgICBjb25zdCBoaWdoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGhpZ2guY2xhc3NOYW1lID0gJ2hpZ2gnO1xuXG4gICAgICAgIGNvbnN0IGxvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBsb3cuY2xhc3NOYW1lID0gJ2xvdyc7XG5cbiAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXG4gICAgICAgIGlmICh1bml0ID09ICdjZWwnKSB7XG4gICAgICAgICAgICBoaWdoLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVtpXS5kYXkubWF4dGVtcF9jICsgJ8KwQyc7XG4gICAgICAgICAgICBsb3cuaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmRheS5taW50ZW1wX2MgKyAnwrBDJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhpZ2guaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmRheS5tYXh0ZW1wX2YgKyAnwrBGJztcbiAgICAgICAgICAgIGxvdy5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uZGF5Lm1pbnRlbXBfZiArICfCsEYnO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlSWNvbihvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uZGF5LmNvbmRpdGlvbi50ZXh0LCBpY29uKTtcblxuICAgICAgICBjYXJkLmFwcGVuZENoaWxkKGRheSk7XG4gICAgICAgIGNhcmQuYXBwZW5kQ2hpbGQoaGlnaCk7XG4gICAgICAgIGNhcmQuYXBwZW5kQ2hpbGQobG93KTtcbiAgICAgICAgY2FyZC5hcHBlbmRDaGlsZChpY29uKTtcblxuICAgICAgICBmb3JlY2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlIb3VybHkob2JqZWN0LHVuaXQsc2xpZGUpIHtcbiAgICBsZXQgY2FyZHNEaXNwbGF5ZWQgPSAxO1xuICAgIGxldCBjb21wbGV0ZWQgPSBmYWxzZTtcbiAgICBmb3JlY2FzdENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgIGhvdXJseUNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgIFxuICAgIGxldCBjdXJyZW50SG91ciA9IChuZXcgRGF0ZShvYmplY3QuY3VycmVudC5sYXN0X3VwZGF0ZWQpKS50b0xvY2FsZVRpbWVTdHJpbmcoKS5zdWJzdHJpbmcoMCwgMik7XG4gICAgY3VycmVudEhvdXIgPSBOdW1iZXIoY3VycmVudEhvdXIpO1xuXG4gICAgd2hpbGUodHJ1ZSkge1xuICAgICAgICBmb3IobGV0IGk9Y3VycmVudEhvdXIgKyAoc2xpZGUtMSkqNjsgaTw9MjM7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgdGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgaWYoaT09MClcbiAgICAgICAgICAgICAgICB0aW1lLmlubmVySFRNTCA9IFwiMTI6MDAgQU1cIjtcbiAgICAgICAgICAgIGVsc2UgaWYoaTw9MTIpXG4gICAgICAgICAgICAgICAgdGltZS5pbm5lckhUTUwgPSBpICsgXCI6MDAgQU1cIjtcbiAgICAgICAgICAgIGVsc2UgXG4gICAgICAgICAgICAgICAgdGltZS5pbm5lckhUTUwgPSAoaS0xMikgKyBcIjowMCBQTVwiO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0ZW1wLmNsYXNzTmFtZSA9ICdoaWdoJztcbiAgICBcbiAgICAgICAgICAgIGlmKHVuaXQgPT0gJ2NlbCcpIHtcbiAgICAgICAgICAgICAgICB0ZW1wLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5ob3VyW2ldLnRlbXBfYyArICfCsEMnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBcbiAgICAgICAgICAgICAgICB0ZW1wLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5ob3VyW2ldLnRlbXBfZiArICfCsEYnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgXG4gICAgICAgICAgICB1cGRhdGVJY29uKG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5ob3VyW2ldLmNvbmRpdGlvbi50ZXh0LCBpY29uKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FyZC5hcHBlbmRDaGlsZCh0aW1lKTtcbiAgICAgICAgICAgIGNhcmQuYXBwZW5kQ2hpbGQodGVtcCk7XG4gICAgICAgICAgICBjYXJkLmFwcGVuZENoaWxkKGljb24pO1xuICAgIFxuICAgICAgICAgICAgaG91cmx5Q29udGFpbmVyLmFwcGVuZENoaWxkKGNhcmQpO1xuICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihjYXJkc0Rpc3BsYXllZCA9PSA2KSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVkPXRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXJkc0Rpc3BsYXllZCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoY29tcGxldGVkKVxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgbGV0IHJlbWFpbmluZ0hvdXJzID0gY3VycmVudEhvdXIgKyAoc2xpZGUtMSkqNiAtIDI0O1xuXG4gICAgICAgIGlmKHJlbWFpbmluZ0hvdXJzPDApXG4gICAgICAgICAgICByZW1haW5pbmdIb3VycyA9IDA7XG5cbiAgICAgICAgZm9yKGxldCBpPTAgKyByZW1haW5pbmdIb3VyczsgaTw9MjM7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgdGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgaWYoaT09MClcbiAgICAgICAgICAgICAgICB0aW1lLmlubmVySFRNTCA9IFwiMTI6MDAgQU1cIjtcbiAgICAgICAgICAgIGVsc2UgaWYoaTw9MTIpXG4gICAgICAgICAgICAgICAgdGltZS5pbm5lckhUTUwgPSBpICsgXCI6MDAgQU1cIjtcbiAgICAgICAgICAgIGVsc2UgXG4gICAgICAgICAgICAgICAgdGltZS5pbm5lckhUTUwgPSAoaS0xMikgKyBcIjowMCBQTVwiO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0ZW1wLmNsYXNzTmFtZSA9ICdoaWdoJztcbiAgICBcbiAgICAgICAgICAgIGlmKHVuaXQgPT0gJ2NlbCcpIHtcbiAgICAgICAgICAgICAgICB0ZW1wLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVsxXS5ob3VyW2ldLnRlbXBfYyArICfCsEMnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBcbiAgICAgICAgICAgICAgICB0ZW1wLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVsxXS5ob3VyW2ldLnRlbXBfZiArICfCsEYnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgXG4gICAgICAgICAgICB1cGRhdGVJY29uKG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVsxXS5ob3VyW2ldLmNvbmRpdGlvbi50ZXh0LCBpY29uKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FyZC5hcHBlbmRDaGlsZCh0aW1lKTtcbiAgICAgICAgICAgIGNhcmQuYXBwZW5kQ2hpbGQodGVtcCk7XG4gICAgICAgICAgICBjYXJkLmFwcGVuZENoaWxkKGljb24pO1xuICAgIFxuICAgICAgICAgICAgaG91cmx5Q29udGFpbmVyLmFwcGVuZENoaWxkKGNhcmQpO1xuICAgIFxuICAgICAgICAgICAgaWYoY2FyZHNEaXNwbGF5ZWQgPT0gNikge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZD10cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FyZHNEaXNwbGF5ZWQrKztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGNvbXBsZXRlZClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBcbn1cblxuZXhwb3J0IHsgZGlzcGxheURhaWx5LGRpc3BsYXlIb3VybHkgfTsiLCJpbXBvcnQgeyBkaXNwbGF5RGFpbHksIGRpc3BsYXlIb3VybHkgfSBmcm9tIFwiLi9kaXNwbGF5Rm9yZWNhc3RcIjtcbmltcG9ydCB1cGRhdGVJY29uIGZyb20gXCIuL3VwZGF0ZUljb25cIjtcblxuY29uc3QgY3VycmVudFdlYXRoZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudHdlYXRoZXJ0ZXh0Jyk7XG5jb25zdCBsb2NhdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhdGlvbicpO1xuXG5jb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGUnKTtcbmNvbnN0IHRpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZScpO1xuXG5jb25zdCBjdXJyZW50VGVtcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50dGVtcCcpO1xuY29uc3QgdG9kYXlJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZGF5aWNvbicpO1xuXG5jb25zdCB0b2RheUhpZ2hUZW1wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpZ2h0ZW1wJyk7XG5jb25zdCB0b2RheUxvd1RlbXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG93dGVtcCcpO1xuY29uc3QgZmVlbHNMaWtlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZlZWxzbGlrZScpO1xuXG5jb25zdCBwcmVjaXBpdGF0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZWNpcGl0YXRpb252YWx1ZScpO1xuY29uc3QgaHVtaWRpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaHVtaWRpdHl2YWx1ZScpO1xuY29uc3Qgd2luZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5kdmFsdWUnKTtcbmNvbnN0IHByZXNzdXJlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXNzdXJldmFsdWUnKTtcblxuY29uc3Qgc3VucmlzZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdW5yaXNlJyk7XG5jb25zdCBzdW5zZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Vuc2V0Jyk7XG5jb25zdCBtb29uUGhhc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9vbnBoYXNlJyk7XG5cbmNvbnN0IGRhaWx5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhaWx5YnV0dG9uJyk7XG5jb25zdCBob3VybHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG91cmx5YnV0dG9uJyk7XG5cblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1cGRhdGVQYWdlKG9iamVjdCwgdW5pdCwgc2xpZGUpIHtcbiAgICBsZXQgaSA9IDE7XG4gICAgXG4gICAgY3VycmVudFdlYXRoZXIuaW5uZXJIVE1MID0gb2JqZWN0LmN1cnJlbnQuY29uZGl0aW9uLnRleHQ7XG4gICAgbG9jYXRpb24uaW5uZXJIVE1MID0gb2JqZWN0LmxvY2F0aW9uLm5hbWUgKyBcIiwgXCIgKyBvYmplY3QubG9jYXRpb24uY291bnRyeTtcblxuICAgIGRhdGUuaW5uZXJIVE1MID0gKG5ldyBEYXRlKG9iamVjdC5jdXJyZW50Lmxhc3RfdXBkYXRlZCkpLnRvRGF0ZVN0cmluZygpO1xuICAgIHRpbWUuaW5uZXJIVE1MID0gKG5ldyBEYXRlKG9iamVjdC5jdXJyZW50Lmxhc3RfdXBkYXRlZCkpLnRvTG9jYWxlVGltZVN0cmluZygpLnN1YnN0cmluZygwLCA1KSArIFwiIChMYXN0IFVwZGF0ZWQpXCI7XG5cbiAgICBpZiAodW5pdCA9PSAnY2VsJykge1xuICAgICAgICBjdXJyZW50VGVtcC5pbm5lckhUTUwgPSBvYmplY3QuY3VycmVudC50ZW1wX2MgKyAnwrBDJztcblxuICAgICAgICB0b2RheUhpZ2hUZW1wLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5kYXkubWF4dGVtcF9jICsgJ8KwQyc7XG4gICAgICAgIHRvZGF5TG93VGVtcC5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uZGF5Lm1pbnRlbXBfYyArICfCsEMnO1xuICAgICAgICBmZWVsc0xpa2UuaW5uZXJIVE1MID0gb2JqZWN0LmN1cnJlbnQuZmVlbHNsaWtlX2MgKyAnwrBDJztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGN1cnJlbnRUZW1wLmlubmVySFRNTCA9IG9iamVjdC5jdXJyZW50LnRlbXBfZiArICfCsEYnO1xuXG4gICAgICAgIHRvZGF5SGlnaFRlbXAuaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5WzBdLmRheS5tYXh0ZW1wX2YgKyAnwrBGJztcbiAgICAgICAgdG9kYXlMb3dUZW1wLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5kYXkubWludGVtcF9mICsgJ8KwRic7XG4gICAgICAgIGZlZWxzTGlrZS5pbm5lckhUTUwgPSBvYmplY3QuY3VycmVudC5mZWVsc2xpa2VfZiArICfCsEYnO1xuICAgIH1cblxuXG4gICAgcHJlY2lwaXRhdGlvbi5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uZGF5LmRhaWx5X2NoYW5jZV9vZl9yYWluICsgJyUnO1xuICAgIGh1bWlkaXR5LmlubmVySFRNTCA9IG9iamVjdC5jdXJyZW50Lmh1bWlkaXR5ICsgXCIlXCI7XG4gICAgd2luZC5pbm5lckhUTUwgPSBvYmplY3QuY3VycmVudC53aW5kX21waCArICdtcGggICcgKyBvYmplY3QuY3VycmVudC53aW5kX2RpcjtcbiAgICBwcmVzc3VyZS5pbm5lckhUTUwgPSBvYmplY3QuY3VycmVudC5wcmVzc3VyZV9tYiArICdtYic7XG5cbiAgICBzdW5yaXNlLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5hc3Ryby5zdW5yaXNlO1xuICAgIHN1bnNldC5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uYXN0cm8uc3Vuc2V0O1xuICAgIG1vb25QaGFzZS5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uYXN0cm8ubW9vbl9waGFzZTtcblxuICAgIHVwZGF0ZUljb24ob2JqZWN0LmN1cnJlbnQuY29uZGl0aW9uLnRleHQsIHRvZGF5SWNvbik7XG5cbiAgICBpZihkYWlseS5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgZGlzcGxheURhaWx5KG9iamVjdCx1bml0LHNsaWRlKTtcbiAgICB9XG5cbiAgICBpZihob3VybHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKVxuICAgICAgICBkaXNwbGF5SG91cmx5KG9iamVjdCx1bml0LHNsaWRlKTtcbn0iLCJpbXBvcnQgdXBkYXRlUGFnZSBmcm9tIFwiLi91cGRhdGVQYWdlXCI7XG5cbmNvbnN0IGJhc2VVUkwgPSAnaHR0cHM6Ly9hcGkud2VhdGhlcmFwaS5jb20vdjEvZm9yZWNhc3QuanNvbj9rZXk9MTM3MGE3ZWE5MGFjNGI5OWJhZjIyMzA1MzIzMTQwOCZkYXlzPTQmcT0nXG5jb25zdCBrZXkgPSAnMTM3MGE3ZWE5MGFjNGI5OWJhZjIyMzA1MzIzMTQwOCc7XG5cbmFzeW5jIGZ1bmN0aW9uIGdldERhdGEoY2l0eSx1bml0LHNsaWRlKSB7XG4gICAgY29uc3QgVVJMID0gYmFzZVVSTCArIGNpdHk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFVSTCwge21vZGU6ICdjb3JzJ30pO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgeyBnZXREYXRhIH07IiwiaW1wb3J0IHsgZ2V0RGF0YSB9IGZyb20gXCIuL2dldERhdGFcIjtcbmltcG9ydCB1cGRhdGVQYWdlIGZyb20gXCIuL3VwZGF0ZVBhZ2VcIjtcblxuY29uc3QgdXJsID0gXCJodHRwczovL2FwaS53ZWF0aGVyYXBpLmNvbS92MS9mb3JlY2FzdC5qc29uP2tleT0xMzcwYTdlYTkwYWM0Yjk5YmFmMjIzMDUzMjMxNDA4JnE9RGVocmFkdW4mZGF5cz0zXCI7XG5cbmNvbnN0IHNlYXJjaGJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hib3gnKTtcbmNvbnN0IHNlYXJjaGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hidXR0b24nKTtcblxuY29uc3QgdG9nZ2xlVW5pdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1bml0cycpO1xuXG5jb25zdCBkYWlseSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYWlseWJ1dHRvbicpO1xuY29uc3QgaG91cmx5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvdXJseWJ1dHRvbicpO1xuXG5jb25zdCBuYXZpZ2F0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24nKTtcbmNvbnN0IGxlZnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVmdCcpO1xuY29uc3QgcmlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQnKTtcblxuY29uc3QgY2lyY2xlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaXJjbGVzIGltZycpO1xuXG5sZXQgc2xpZGUgPSAxO1xuXG5sZXQgdW5pdCA9ICdjZWwnO1xubGV0IGN1cnJlbnRMb2NhdGlvbiA9ICdkZWhyYWR1bic7XG5cbmxldCByZXN1bHQ7XG5cblxuYXN5bmMgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgcmVzdWx0ID0gYXdhaXQgZ2V0RGF0YSgnZGVocmFkdW4nLHVuaXQpO1xuICAgIHVwZGF0ZVBhZ2UocmVzdWx0LHVuaXQsc2xpZGUpO1xufVxuXG5zdGFydCgpO1xuXG5cbnNlYXJjaGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICBjdXJyZW50TG9jYXRpb24gPSBzZWFyY2hib3gudmFsdWU7XG4gICAgcmVzdWx0ID0gYXdhaXQgZ2V0RGF0YShzZWFyY2hib3gudmFsdWUsdW5pdCk7XG4gICAgdXBkYXRlUGFnZShyZXN1bHQsdW5pdCxzbGlkZSk7XG4gICAgc2VhcmNoYm94LnZhbHVlID0gXCJcIjtcbiAgICBcbn0pXG5cbnNlYXJjaGJveC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgYXN5bmMoZSkgPT4ge1xuICAgIGlmKGUua2V5ID09ICdFbnRlcicpIHtcbiAgICAgICAgY3VycmVudExvY2F0aW9uID0gc2VhcmNoYm94LnZhbHVlO1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBnZXREYXRhKHNlYXJjaGJveC52YWx1ZSx1bml0KVxuICAgICAgICB1cGRhdGVQYWdlKHJlc3VsdCx1bml0LHNsaWRlKTtcbiAgICAgICAgc2VhcmNoYm94LnZhbHVlID0gXCJcIjtcbiAgICB9XG59KTtcblxudG9nZ2xlVW5pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBpZih1bml0ID09ICdjZWwnKSB7XG4gICAgICAgIHVuaXQgPSAnZmFyJztcbiAgICAgICAgdXBkYXRlUGFnZShyZXN1bHQsdW5pdCxzbGlkZSk7XG4gICAgICAgIHRvZ2dsZVVuaXQuaW5uZXJIVE1MID0gXCJEaXNwbGF5IMKwQ1wiXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB1bml0ID0gJ2NlbCc7XG4gICAgICAgIHVwZGF0ZVBhZ2UocmVzdWx0LHVuaXQsc2xpZGUpO1xuICAgICAgICB0b2dnbGVVbml0LmlubmVySFRNTCA9IFwiRGlzcGxheSDCsEZcIlxuICAgIH1cbn0pO1xuXG5kYWlseS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBpZighZGFpbHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgIGhvdXJseS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuICAgICAgICBkYWlseS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgICB1cGRhdGVQYWdlKHJlc3VsdCx1bml0KTtcbiAgICAgICAgbmF2aWdhdGlvbi5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUtb3V0bGluZS5wbmcnO1xuICAgICAgICBzbGlkZT0xO1xuICAgIH1cbn0pO1xuXG5ob3VybHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgaWYoIWhvdXJseS5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgZGFpbHkuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgaG91cmx5LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGdldERhdGEoY3VycmVudExvY2F0aW9uLHVuaXQpXG4gICAgICAgIHVwZGF0ZVBhZ2UocmVzdWx0LHVuaXQsc2xpZGUpO1xuICAgICAgICBuYXZpZ2F0aW9uLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUucG5nJztcbiAgICB9XG59KTtcblxubGVmdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBpZihzbGlkZSA9PSAxKSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUtb3V0bGluZS5wbmcnO1xuICAgICAgICBzbGlkZSA9IDQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUucG5nJztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUtb3V0bGluZS5wbmcnO1xuICAgICAgICBzbGlkZS0tO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtzbGlkZX1gKS5zcmMgPSAnYXNzZXRzL3N2Z3MvY2lyY2xlLnBuZyc7XG4gICAgfVxuXG4gICAgdXBkYXRlUGFnZShyZXN1bHQsdW5pdCxzbGlkZSk7XG59KTtcblxucmlnaHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYoc2xpZGUgPT0gNCkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtzbGlkZX1gKS5zcmMgPSAnYXNzZXRzL3N2Z3MvY2lyY2xlLW91dGxpbmUucG5nJztcbiAgICAgICAgc2xpZGUgPSAxO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtzbGlkZX1gKS5zcmMgPSAnYXNzZXRzL3N2Z3MvY2lyY2xlLnBuZyc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtzbGlkZX1gKS5zcmMgPSAnYXNzZXRzL3N2Z3MvY2lyY2xlLW91dGxpbmUucG5nJztcbiAgICAgICAgc2xpZGUrKztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7c2xpZGV9YCkuc3JjID0gJ2Fzc2V0cy9zdmdzL2NpcmNsZS5wbmcnO1xuICAgIH1cbiAgICB1cGRhdGVQYWdlKHJlc3VsdCx1bml0LHNsaWRlKTtcbn0pO1xuXG5jaXJjbGVzLmZvckVhY2goY2lyY2xlID0+IHtcbiAgICBjaXJjbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUtb3V0bGluZS5wbmcnO1xuICAgICAgICBzbGlkZSA9IGNpcmNsZS5pZDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7c2xpZGV9YCkuc3JjID0gJ2Fzc2V0cy9zdmdzL2NpcmNsZS5wbmcnO1xuICAgICAgICB1cGRhdGVQYWdlKHJlc3VsdCx1bml0LHNsaWRlKTtcbiAgICB9KVxufSk7XG5cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiaSIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJ1cGRhdGVJY29uIiwid2VhdGhlciIsImljb24iLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiZm9yZWNhc3RDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiaG91cmx5Q29udGFpbmVyIiwiZGF5c09mV2VlayIsImN1cnJlbnRXZWF0aGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJkYXRlIiwidGltZSIsImN1cnJlbnRUZW1wIiwidG9kYXlJY29uIiwidG9kYXlIaWdoVGVtcCIsInRvZGF5TG93VGVtcCIsImZlZWxzTGlrZSIsInByZWNpcGl0YXRpb24iLCJodW1pZGl0eSIsIndpbmQiLCJwcmVzc3VyZSIsInN1bnJpc2UiLCJzdW5zZXQiLCJtb29uUGhhc2UiLCJkYWlseSIsImhvdXJseSIsInVwZGF0ZVBhZ2UiLCJvYmplY3QiLCJ1bml0Iiwic2xpZGUiLCJpbm5lckhUTUwiLCJjdXJyZW50IiwiY29uZGl0aW9uIiwidGV4dCIsIm5hbWUiLCJjb3VudHJ5IiwiRGF0ZSIsImxhc3RfdXBkYXRlZCIsInRvRGF0ZVN0cmluZyIsInRvTG9jYWxlVGltZVN0cmluZyIsInN1YnN0cmluZyIsInRlbXBfYyIsImZvcmVjYXN0IiwiZm9yZWNhc3RkYXkiLCJkYXkiLCJtYXh0ZW1wX2MiLCJtaW50ZW1wX2MiLCJmZWVsc2xpa2VfYyIsInRlbXBfZiIsIm1heHRlbXBfZiIsIm1pbnRlbXBfZiIsImZlZWxzbGlrZV9mIiwiZGFpbHlfY2hhbmNlX29mX3JhaW4iLCJ3aW5kX21waCIsIndpbmRfZGlyIiwicHJlc3N1cmVfbWIiLCJhc3RybyIsIm1vb25fcGhhc2UiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImNhcmQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiZ2V0RGF5IiwiaGlnaCIsImxvdyIsImFwcGVuZENoaWxkIiwiZGlzcGxheURhaWx5IiwiY2FyZHNEaXNwbGF5ZWQiLCJjb21wbGV0ZWQiLCJjdXJyZW50SG91ciIsIk51bWJlciIsInRlbXAiLCJob3VyIiwicmVtYWluaW5nSG91cnMiLCJkaXNwbGF5SG91cmx5IiwiYXN5bmMiLCJnZXREYXRhIiwiY2l0eSIsIlVSTCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtb2RlIiwicmVzdWx0IiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJzZWFyY2hib3giLCJzZWFyY2hidXR0b24iLCJ0b2dnbGVVbml0IiwibmF2aWdhdGlvbiIsImxlZnQiLCJyaWdodCIsImNpcmNsZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3VycmVudExvY2F0aW9uIiwic3RhcnQiLCJhZGRFdmVudExpc3RlbmVyIiwidmFsdWUiLCJrZXkiLCJyZW1vdmUiLCJhZGQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJmb3JFYWNoIiwiY2lyY2xlIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9