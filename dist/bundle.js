(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var c=n.getElementsByTagName("script");if(c.length)for(var s=c.length-1;s>-1&&!t;)t=c[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"9d129110dad380795766.png",n=e.p+"30b61f2d2b3761b7dd79.png",c=e.p+"763d9f709af860fa49c6.png",s=e.p+"e22a54b5b4a5ff085fc2.png",a=e.p+"dc758041c1a42a676c83.png",r=e.p+"dddc033163ec198b80e4.png",d=e.p+"9bacc13ba563765c1022.png",i=e.p+"bfa052d4ba0ad0353290.png",o=e.p+"c6ef75775cb48997b919.png",l=e.p+"c90f38a38a64ceba12de.png",m=e.p+"8af0012d8baf65a404d2.png",u=e.p+"66245a4e8b3e930e3a92.png",p=e.p+"3190cd4d6b0f6bf582f5.png",y=e.p+"e084c7323a6f30ebee93.png",g=e.p+"7e2b4db19a47e253a4ae.png";function f(e,f){(e=e.toLowerCase()).includes("sunny")||"clear"==e?f.src=y:e.includes("cloudy")?e.includes("partly")?f.src=m:f.src=n:"overcast"==e?f.src=l:e.includes("thunder")?f.src=g:e.includes("pellets")?f.src=r:"blizzard"==e?f.src=t:e.includes("fog")?f.src=a:"mist"==e?f.src=o:e.includes("rain")?e.includes("light")?f.src=c:e.includes("moderate")?f.src=i:e.includes("heavy")?f.src=d:e.includes("freezing")?f.src=s:f.src=c:e.includes("snow")?f.src=p:e.includes("sleet")&&(f.src=u)}const E=document.querySelector(".forecastcontainer"),h=document.querySelector(".hourlycontainer"),v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],L=document.getElementById("currentweathertext"),b=document.getElementById("location"),M=document.getElementById("date"),T=document.getElementById("time"),B=document.getElementById("currenttemp"),I=document.getElementById("todayicon"),H=document.getElementById("hightemp"),w=document.getElementById("lowtemp"),_=document.getElementById("feelslike"),C=document.getElementById("precipitationvalue"),$=document.getElementById("humidityvalue"),k=document.getElementById("windvalue"),S=document.getElementById("pressurevalue"),x=document.getElementById("sunrise"),F=document.getElementById("sunset"),D=document.getElementById("moonphase"),N=document.getElementById("dailybutton"),A=document.getElementById("hourlybutton");function q(e,t,n){L.innerHTML=e.current.condition.text,b.innerHTML=e.location.name+", "+e.location.country,M.innerHTML=new Date(e.current.last_updated).toDateString(),T.innerHTML=new Date(e.current.last_updated).toLocaleTimeString().substring(0,5)+" (Last Updated)","cel"==t?(B.innerHTML=e.current.temp_c+"°C",H.innerHTML=e.forecast.forecastday[0].day.maxtemp_c+"°C",w.innerHTML=e.forecast.forecastday[0].day.mintemp_c+"°C",_.innerHTML=e.current.feelslike_c+"°C"):(B.innerHTML=e.current.temp_f+"°F",H.innerHTML=e.forecast.forecastday[0].day.maxtemp_f+"°F",w.innerHTML=e.forecast.forecastday[0].day.mintemp_f+"°F",_.innerHTML=e.current.feelslike_f+"°F"),C.innerHTML=e.forecast.forecastday[0].day.daily_chance_of_rain+"%",$.innerHTML=e.current.humidity+"%",k.innerHTML=e.current.wind_mph+"mph  "+e.current.wind_dir,S.innerHTML=e.current.pressure_mb+"mb",x.innerHTML=e.forecast.forecastday[0].astro.sunrise,F.innerHTML=e.forecast.forecastday[0].astro.sunset,D.innerHTML=e.forecast.forecastday[0].astro.moon_phase,f(e.current.condition.text,I),N.classList.contains("selected")&&function(e,t,n){E.innerHTML="",h.innerHTML="";for(let n=1;n<=3;n++){const c=document.createElement("div"),s=document.createElement("div");s.className="day",s.innerHTML=v[new Date(e.forecast.forecastday[n].date).getDay()];const a=document.createElement("div");a.className="high";const r=document.createElement("div");r.className="low";const d=document.createElement("img");"cel"==t?(a.innerHTML=e.forecast.forecastday[n].day.maxtemp_c+"°C",r.innerHTML=e.forecast.forecastday[n].day.mintemp_c+"°C"):(a.innerHTML=e.forecast.forecastday[n].day.maxtemp_f+"°F",r.innerHTML=e.forecast.forecastday[n].day.mintemp_f+"°F"),f(e.forecast.forecastday[n].day.condition.text,d),c.appendChild(s),c.appendChild(a),c.appendChild(r),c.appendChild(d),E.appendChild(c)}}(e,t),A.classList.contains("selected")&&function(e,t,n){let c=1;E.innerHTML="",h.innerHTML="";let s=new Date(e.current.last_updated).toLocaleTimeString().substring(0,2);s=Number(s);for(let a=s+6*(n-1);a<=23;a++){const n=document.createElement("div"),s=document.createElement("div");s.innerHTML=0==a?"12:00 AM":a<=12?a+":00 AM":a-12+":00 PM";const r=document.createElement("div");r.className="high",r.innerHTML="cel"==t?e.forecast.forecastday[0].hour[a].temp_c+"°C":e.forecast.forecastday[0].hour[a].temp_f+"°F";const d=document.createElement("img");if(f(e.forecast.forecastday[0].hour[a].condition.text,d),n.appendChild(s),n.appendChild(r),n.appendChild(d),h.appendChild(n),6==c)return;c++}let a=s+6*(n-1)-24;a<0&&(a=0);for(let n=0+a;n<=23;n++){const s=document.createElement("div"),a=document.createElement("div");a.innerHTML=0==n?"12:00 AM":n<=12?n+":00 AM":n-12+":00 PM";const r=document.createElement("div");r.className="high",r.innerHTML="cel"==t?e.forecast.forecastday[1].hour[n].temp_c+"°C":e.forecast.forecastday[1].hour[n].temp_f+"°F";const d=document.createElement("img");if(f(e.forecast.forecastday[1].hour[n].condition.text,d),s.appendChild(a),s.appendChild(r),s.appendChild(d),h.appendChild(s),6==c)return;c++}}(e,t,n)}async function j(e,t,n){const c="https://api.weatherapi.com/v1/forecast.json?key=1370a7ea90ac4b99baf223053231408&days=4&q="+e,s=await fetch(c,{mode:"cors"}),a=await s.json();return console.log(a),a}const z=document.getElementById("searchbox"),P=document.getElementById("searchbutton"),U=document.getElementById("units"),W=document.getElementById("dailybutton"),G=document.getElementById("hourlybutton"),J=document.querySelector(".navigation"),K=document.getElementById("left"),O=document.getElementById("right"),Q=document.querySelectorAll(".circles img");let R,V=1,X="cel",Y="dehradun";!async function(){R=await j(Y),q(R,X,V)}(),P.addEventListener("click",(async()=>{Y=z.value,R=await j(z.value),q(R,X,V),z.value=""})),z.addEventListener("keydown",(async e=>{"Enter"==e.key&&(Y=z.value,R=await j(z.value),q(R,X,V),z.value="")})),U.addEventListener("click",(()=>{"cel"==X?(X="far",q(R,X,V),U.innerHTML="Display °C"):(X="cel",q(R,X,V),U.innerHTML="Display °F")})),W.addEventListener("click",(()=>{W.classList.contains("selected")||(G.classList.remove("selected"),W.classList.add("selected"),q(R,X),J.style.visibility="hidden",document.getElementById(`${V}`).src="assets/svgs/circle-outline.png",V=1)})),G.addEventListener("click",(async()=>{G.classList.contains("selected")||(W.classList.remove("selected"),G.classList.add("selected"),R=await j(Y),q(R,X,V),J.style.visibility="visible",document.getElementById(`${V}`).src="assets/svgs/circle.png")})),K.addEventListener("click",(()=>{1==V?(document.getElementById(`${V}`).src="assets/svgs/circle-outline.png",V=4,document.getElementById(`${V}`).src="assets/svgs/circle.png"):(document.getElementById(`${V}`).src="assets/svgs/circle-outline.png",V--,document.getElementById(`${V}`).src="assets/svgs/circle.png"),q(R,X,V)})),O.addEventListener("click",(()=>{4==V?(document.getElementById(`${V}`).src="assets/svgs/circle-outline.png",V=1,document.getElementById(`${V}`).src="assets/svgs/circle.png"):(document.getElementById(`${V}`).src="assets/svgs/circle-outline.png",V++,document.getElementById(`${V}`).src="assets/svgs/circle.png"),q(R,X,V)})),Q.forEach((e=>{e.addEventListener("click",(()=>{document.getElementById(`${V}`).src="assets/svgs/circle-outline.png",V=e.id,document.getElementById(`${V}`).src="assets/svgs/circle.png",q(R,X,V)}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYXRoZXIvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly93ZWF0aGVyL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvdXBkYXRlSWNvbi5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLy4vc3JjL2Rpc3BsYXlGb3JlY2FzdC5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLy4vc3JjL3VwZGF0ZVBhZ2UuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci8uL3NyYy9nZXREYXRhLmpzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjO1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHtcblx0XHRcdHZhciBpID0gc2NyaXB0cy5sZW5ndGggLSAxO1xuXHRcdFx0d2hpbGUgKGkgPiAtMSAmJiAhc2NyaXB0VXJsKSBzY3JpcHRVcmwgPSBzY3JpcHRzW2ktLV0uc3JjO1xuXHRcdH1cblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiaW1wb3J0IGJsaXp6YXJkIGZyb20gJy4vaW1hZ2VzL2ljb25zL2JsaXp6YXJkLnBuZyc7XG5pbXBvcnQgY2xvdWR5IGZyb20gJy4vaW1hZ2VzL2ljb25zL2Nsb3VkeS5wbmcnO1xuaW1wb3J0IGRyaXp6bGUgZnJvbSAnLi9pbWFnZXMvaWNvbnMvZHJpenpsZS5wbmcnO1xuaW1wb3J0IGZyZWV6aW5nRHJpenpsZSBmcm9tICcuL2ltYWdlcy9pY29ucy9mcmVlemluZy1kcml6emxlLnBuZyc7XG5pbXBvcnQgZm9nIGZyb20gJy4vaW1hZ2VzL2ljb25zL2ZvZy5wbmcnO1xuaW1wb3J0IGhhaWwgZnJvbSAnLi9pbWFnZXMvaWNvbnMvaGFpbC5wbmcnO1xuaW1wb3J0IGhlYXZ5UmFpbiBmcm9tICcuL2ltYWdlcy9pY29ucy9oZWF2eS1yYWluLnBuZyc7XG5pbXBvcnQgbW9kZXJhdGVSYWluIGZyb20gJy4vaW1hZ2VzL2ljb25zL2xpZ2h0LXJhaW4ucG5nJztcbmltcG9ydCBtaXN0IGZyb20gJy4vaW1hZ2VzL2ljb25zL21pc3QucG5nJztcbmltcG9ydCBvdmVyY2FzdCBmcm9tICcuL2ltYWdlcy9pY29ucy9vdmVyY2FzdC5wbmcnO1xuaW1wb3J0IHBhcnRseUNsb3VkeSBmcm9tICcuL2ltYWdlcy9pY29ucy9wYXJ0bHktY2xvdWR5LnBuZyc7XG5pbXBvcnQgc2xlZXQgZnJvbSAnLi9pbWFnZXMvaWNvbnMvc2xlZXQucG5nJztcbmltcG9ydCBzbm93IGZyb20gJy4vaW1hZ2VzL2ljb25zL3Nub3dmYWxsLnBuZyc7XG5pbXBvcnQgc3VuIGZyb20gJy4vaW1hZ2VzL2ljb25zL3N1bm55LnBuZyc7XG5pbXBvcnQgdGh1bmRlciBmcm9tICcuL2ltYWdlcy9pY29ucy90aHVuZGVyLnBuZyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVwZGF0ZUljb24od2VhdGhlciwgaWNvbikge1xuICAgIHdlYXRoZXIgPSB3ZWF0aGVyLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAod2VhdGhlci5pbmNsdWRlcygnc3VubnknKSB8fCB3ZWF0aGVyID09ICdjbGVhcicpXG4gICAgICAgIGljb24uc3JjID0gc3VuO1xuICAgIGVsc2UgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ2Nsb3VkeScpKSB7XG4gICAgICAgIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCdwYXJ0bHknKSlcbiAgICAgICAgICAgIGljb24uc3JjID0gcGFydGx5Q2xvdWR5O1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBpY29uLnNyYyA9IGNsb3VkeTtcbiAgICB9XG4gICAgZWxzZSBpZiAod2VhdGhlciA9PSAnb3ZlcmNhc3QnKVxuICAgICAgICBpY29uLnNyYyA9IG92ZXJjYXN0O1xuICAgIGVsc2UgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ3RodW5kZXInKSlcbiAgICAgICAgaWNvbi5zcmMgPSB0aHVuZGVyO1xuICAgIGVsc2UgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ3BlbGxldHMnKSlcbiAgICAgICAgaWNvbi5zcmMgPSBoYWlsO1xuICAgIGVsc2UgaWYgKHdlYXRoZXIgPT0gJ2JsaXp6YXJkJylcbiAgICAgICAgaWNvbi5zcmMgPSBibGl6emFyZDtcbiAgICBlbHNlIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCdmb2cnKSlcbiAgICAgICAgaWNvbi5zcmMgPSBmb2c7XG4gICAgZWxzZSBpZiAod2VhdGhlciA9PSAnbWlzdCcpXG4gICAgICAgIGljb24uc3JjID0gbWlzdDtcbiAgICBlbHNlIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCdyYWluJyB8fCB3ZWF0aGVyLmluY2x1ZGVzKCdkcml6emxlJykpKSB7XG4gICAgICAgIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCdsaWdodCcpKVxuICAgICAgICAgICAgaWNvbi5zcmMgPSBkcml6emxlO1xuICAgICAgICBlbHNlIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCdtb2RlcmF0ZScpKVxuICAgICAgICAgICAgaWNvbi5zcmMgPSBtb2RlcmF0ZVJhaW47XG4gICAgICAgIGVsc2UgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ2hlYXZ5JykpXG4gICAgICAgICAgICBpY29uLnNyYyA9IGhlYXZ5UmFpbjtcbiAgICAgICAgZWxzZSBpZiAod2VhdGhlci5pbmNsdWRlcygnZnJlZXppbmcnKSlcbiAgICAgICAgICAgIGljb24uc3JjID0gZnJlZXppbmdEcml6emxlO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBpY29uLnNyYyA9IGRyaXp6bGU7XG4gICAgfVxuXG4gICAgZWxzZSBpZiAod2VhdGhlci5pbmNsdWRlcygnc25vdycpKVxuICAgICAgICBpY29uLnNyYyA9IHNub3c7XG4gICAgZWxzZSBpZiAod2VhdGhlci5pbmNsdWRlcygnc2xlZXQnKSlcbiAgICAgICAgaWNvbi5zcmMgPSBzbGVldDtcblxufSIsImltcG9ydCB1cGRhdGVJY29uIGZyb20gXCIuL3VwZGF0ZUljb25cIjtcblxuY29uc3QgZm9yZWNhc3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9yZWNhc3Rjb250YWluZXInKTtcbmNvbnN0IGhvdXJseUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob3VybHljb250YWluZXInKTtcblxuY29uc3QgZGF5c09mV2VlayA9IFtcIlN1bmRheVwiLCBcIk1vbmRheVwiLCBcIlR1ZXNkYXlcIiwgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCJdO1xuXG5mdW5jdGlvbiBkaXNwbGF5RGFpbHkob2JqZWN0LCB1bml0LCBzbGlkZSkge1xuICAgIGZvcmVjYXN0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgaG91cmx5Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAzOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICAgICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRheS5jbGFzc05hbWUgPSAnZGF5JztcbiAgICAgICAgZGF5LmlubmVySFRNTCA9IGRheXNPZldlZWtbbmV3IERhdGUob2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmRhdGUpLmdldERheSgpXTtcblxuICAgICAgICBjb25zdCBoaWdoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGhpZ2guY2xhc3NOYW1lID0gJ2hpZ2gnO1xuXG4gICAgICAgIGNvbnN0IGxvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBsb3cuY2xhc3NOYW1lID0gJ2xvdyc7XG5cbiAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXG4gICAgICAgIGlmICh1bml0ID09ICdjZWwnKSB7XG4gICAgICAgICAgICBoaWdoLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVtpXS5kYXkubWF4dGVtcF9jICsgJ8KwQyc7XG4gICAgICAgICAgICBsb3cuaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmRheS5taW50ZW1wX2MgKyAnwrBDJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhpZ2guaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmRheS5tYXh0ZW1wX2YgKyAnwrBGJztcbiAgICAgICAgICAgIGxvdy5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uZGF5Lm1pbnRlbXBfZiArICfCsEYnO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlSWNvbihvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uZGF5LmNvbmRpdGlvbi50ZXh0LCBpY29uKTtcblxuICAgICAgICBjYXJkLmFwcGVuZENoaWxkKGRheSk7XG4gICAgICAgIGNhcmQuYXBwZW5kQ2hpbGQoaGlnaCk7XG4gICAgICAgIGNhcmQuYXBwZW5kQ2hpbGQobG93KTtcbiAgICAgICAgY2FyZC5hcHBlbmRDaGlsZChpY29uKTtcblxuICAgICAgICBmb3JlY2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlIb3VybHkob2JqZWN0LCB1bml0LCBzbGlkZSkge1xuICAgIGxldCBjYXJkc0Rpc3BsYXllZCA9IDE7XG4gICAgbGV0IGNvbXBsZXRlZCA9IGZhbHNlO1xuICAgIGZvcmVjYXN0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgaG91cmx5Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICBsZXQgY3VycmVudEhvdXIgPSAobmV3IERhdGUob2JqZWN0LmN1cnJlbnQubGFzdF91cGRhdGVkKSkudG9Mb2NhbGVUaW1lU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDIpO1xuICAgIGN1cnJlbnRIb3VyID0gTnVtYmVyKGN1cnJlbnRIb3VyKTtcblxuXG4gICAgZm9yIChsZXQgaSA9IGN1cnJlbnRIb3VyICsgKHNsaWRlIC0gMSkgKiA2OyBpIDw9IDIzOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaWYgKGkgPT0gMClcbiAgICAgICAgICAgIHRpbWUuaW5uZXJIVE1MID0gXCIxMjowMCBBTVwiO1xuICAgICAgICBlbHNlIGlmIChpIDw9IDEyKVxuICAgICAgICAgICAgdGltZS5pbm5lckhUTUwgPSBpICsgXCI6MDAgQU1cIjtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGltZS5pbm5lckhUTUwgPSAoaSAtIDEyKSArIFwiOjAwIFBNXCI7XG5cbiAgICAgICAgY29uc3QgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0ZW1wLmNsYXNzTmFtZSA9ICdoaWdoJztcblxuICAgICAgICBpZiAodW5pdCA9PSAnY2VsJykge1xuICAgICAgICAgICAgdGVtcC5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uaG91cltpXS50ZW1wX2MgKyAnwrBDJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0ZW1wLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5ob3VyW2ldLnRlbXBfZiArICfCsEYnO1xuXG4gICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblxuICAgICAgICB1cGRhdGVJY29uKG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5ob3VyW2ldLmNvbmRpdGlvbi50ZXh0LCBpY29uKTtcblxuICAgICAgICBjYXJkLmFwcGVuZENoaWxkKHRpbWUpO1xuICAgICAgICBjYXJkLmFwcGVuZENoaWxkKHRlbXApO1xuICAgICAgICBjYXJkLmFwcGVuZENoaWxkKGljb24pO1xuXG4gICAgICAgIGhvdXJseUNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcblxuXG4gICAgICAgIGlmIChjYXJkc0Rpc3BsYXllZCA9PSA2KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY2FyZHNEaXNwbGF5ZWQrKztcbiAgICB9XG5cbiAgICBsZXQgcmVtYWluaW5nSG91cnMgPSBjdXJyZW50SG91ciArIChzbGlkZSAtIDEpICogNiAtIDI0O1xuXG4gICAgaWYgKHJlbWFpbmluZ0hvdXJzIDwgMClcbiAgICAgICAgcmVtYWluaW5nSG91cnMgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDAgKyByZW1haW5pbmdIb3VyczsgaSA8PSAyMzsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGlmIChpID09IDApXG4gICAgICAgICAgICB0aW1lLmlubmVySFRNTCA9IFwiMTI6MDAgQU1cIjtcbiAgICAgICAgZWxzZSBpZiAoaSA8PSAxMilcbiAgICAgICAgICAgIHRpbWUuaW5uZXJIVE1MID0gaSArIFwiOjAwIEFNXCI7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRpbWUuaW5uZXJIVE1MID0gKGkgLSAxMikgKyBcIjowMCBQTVwiO1xuXG4gICAgICAgIGNvbnN0IHRlbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGVtcC5jbGFzc05hbWUgPSAnaGlnaCc7XG5cbiAgICAgICAgaWYgKHVuaXQgPT0gJ2NlbCcpIHtcbiAgICAgICAgICAgIHRlbXAuaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5WzFdLmhvdXJbaV0udGVtcF9jICsgJ8KwQyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGVtcC5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMV0uaG91cltpXS50ZW1wX2YgKyAnwrBGJztcblxuICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cbiAgICAgICAgdXBkYXRlSWNvbihvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMV0uaG91cltpXS5jb25kaXRpb24udGV4dCwgaWNvbik7XG5cbiAgICAgICAgY2FyZC5hcHBlbmRDaGlsZCh0aW1lKTtcbiAgICAgICAgY2FyZC5hcHBlbmRDaGlsZCh0ZW1wKTtcbiAgICAgICAgY2FyZC5hcHBlbmRDaGlsZChpY29uKTtcblxuICAgICAgICBob3VybHlDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZCk7XG5cbiAgICAgICAgaWYgKGNhcmRzRGlzcGxheWVkID09IDYpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYXJkc0Rpc3BsYXllZCsrO1xuICAgIH1cblxuXG59XG5cbmV4cG9ydCB7IGRpc3BsYXlEYWlseSwgZGlzcGxheUhvdXJseSB9OyIsImltcG9ydCB7IGRpc3BsYXlEYWlseSwgZGlzcGxheUhvdXJseSB9IGZyb20gXCIuL2Rpc3BsYXlGb3JlY2FzdFwiO1xuaW1wb3J0IHVwZGF0ZUljb24gZnJvbSBcIi4vdXBkYXRlSWNvblwiO1xuXG5jb25zdCBjdXJyZW50V2VhdGhlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50d2VhdGhlcnRleHQnKTtcbmNvbnN0IGxvY2F0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvY2F0aW9uJyk7XG5cbmNvbnN0IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZScpO1xuY29uc3QgdGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lJyk7XG5cbmNvbnN0IGN1cnJlbnRUZW1wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnR0ZW1wJyk7XG5jb25zdCB0b2RheUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kYXlpY29uJyk7XG5cbmNvbnN0IHRvZGF5SGlnaFRlbXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlnaHRlbXAnKTtcbmNvbnN0IHRvZGF5TG93VGVtcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb3d0ZW1wJyk7XG5jb25zdCBmZWVsc0xpa2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmVlbHNsaWtlJyk7XG5cbmNvbnN0IHByZWNpcGl0YXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJlY2lwaXRhdGlvbnZhbHVlJyk7XG5jb25zdCBodW1pZGl0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdodW1pZGl0eXZhbHVlJyk7XG5jb25zdCB3aW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpbmR2YWx1ZScpO1xuY29uc3QgcHJlc3N1cmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJlc3N1cmV2YWx1ZScpO1xuXG5jb25zdCBzdW5yaXNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1bnJpc2UnKTtcbmNvbnN0IHN1bnNldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdW5zZXQnKTtcbmNvbnN0IG1vb25QaGFzZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb29ucGhhc2UnKTtcblxuY29uc3QgZGFpbHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFpbHlidXR0b24nKTtcbmNvbnN0IGhvdXJseSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob3VybHlidXR0b24nKTtcblxuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVwZGF0ZVBhZ2Uob2JqZWN0LCB1bml0LCBzbGlkZSkge1xuICAgIGxldCBpID0gMTtcbiAgICBcbiAgICBjdXJyZW50V2VhdGhlci5pbm5lckhUTUwgPSBvYmplY3QuY3VycmVudC5jb25kaXRpb24udGV4dDtcbiAgICBsb2NhdGlvbi5pbm5lckhUTUwgPSBvYmplY3QubG9jYXRpb24ubmFtZSArIFwiLCBcIiArIG9iamVjdC5sb2NhdGlvbi5jb3VudHJ5O1xuXG4gICAgZGF0ZS5pbm5lckhUTUwgPSAobmV3IERhdGUob2JqZWN0LmN1cnJlbnQubGFzdF91cGRhdGVkKSkudG9EYXRlU3RyaW5nKCk7XG4gICAgdGltZS5pbm5lckhUTUwgPSAobmV3IERhdGUob2JqZWN0LmN1cnJlbnQubGFzdF91cGRhdGVkKSkudG9Mb2NhbGVUaW1lU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDUpICsgXCIgKExhc3QgVXBkYXRlZClcIjtcblxuICAgIGlmICh1bml0ID09ICdjZWwnKSB7XG4gICAgICAgIGN1cnJlbnRUZW1wLmlubmVySFRNTCA9IG9iamVjdC5jdXJyZW50LnRlbXBfYyArICfCsEMnO1xuXG4gICAgICAgIHRvZGF5SGlnaFRlbXAuaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5WzBdLmRheS5tYXh0ZW1wX2MgKyAnwrBDJztcbiAgICAgICAgdG9kYXlMb3dUZW1wLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5kYXkubWludGVtcF9jICsgJ8KwQyc7XG4gICAgICAgIGZlZWxzTGlrZS5pbm5lckhUTUwgPSBvYmplY3QuY3VycmVudC5mZWVsc2xpa2VfYyArICfCsEMnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY3VycmVudFRlbXAuaW5uZXJIVE1MID0gb2JqZWN0LmN1cnJlbnQudGVtcF9mICsgJ8KwRic7XG5cbiAgICAgICAgdG9kYXlIaWdoVGVtcC5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uZGF5Lm1heHRlbXBfZiArICfCsEYnO1xuICAgICAgICB0b2RheUxvd1RlbXAuaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5WzBdLmRheS5taW50ZW1wX2YgKyAnwrBGJztcbiAgICAgICAgZmVlbHNMaWtlLmlubmVySFRNTCA9IG9iamVjdC5jdXJyZW50LmZlZWxzbGlrZV9mICsgJ8KwRic7XG4gICAgfVxuXG5cbiAgICBwcmVjaXBpdGF0aW9uLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5kYXkuZGFpbHlfY2hhbmNlX29mX3JhaW4gKyAnJSc7XG4gICAgaHVtaWRpdHkuaW5uZXJIVE1MID0gb2JqZWN0LmN1cnJlbnQuaHVtaWRpdHkgKyBcIiVcIjtcbiAgICB3aW5kLmlubmVySFRNTCA9IG9iamVjdC5jdXJyZW50LndpbmRfbXBoICsgJ21waCAgJyArIG9iamVjdC5jdXJyZW50LndpbmRfZGlyO1xuICAgIHByZXNzdXJlLmlubmVySFRNTCA9IG9iamVjdC5jdXJyZW50LnByZXNzdXJlX21iICsgJ21iJztcblxuICAgIHN1bnJpc2UuaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5WzBdLmFzdHJvLnN1bnJpc2U7XG4gICAgc3Vuc2V0LmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5hc3Ryby5zdW5zZXQ7XG4gICAgbW9vblBoYXNlLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5hc3Ryby5tb29uX3BoYXNlO1xuXG4gICAgdXBkYXRlSWNvbihvYmplY3QuY3VycmVudC5jb25kaXRpb24udGV4dCwgdG9kYXlJY29uKTtcblxuICAgIGlmKGRhaWx5LmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICBkaXNwbGF5RGFpbHkob2JqZWN0LHVuaXQsc2xpZGUpO1xuICAgIH1cblxuICAgIGlmKGhvdXJseS5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpXG4gICAgICAgIGRpc3BsYXlIb3VybHkob2JqZWN0LHVuaXQsc2xpZGUpO1xufSIsImltcG9ydCB1cGRhdGVQYWdlIGZyb20gXCIuL3VwZGF0ZVBhZ2VcIjtcblxuY29uc3QgYmFzZVVSTCA9ICdodHRwczovL2FwaS53ZWF0aGVyYXBpLmNvbS92MS9mb3JlY2FzdC5qc29uP2tleT0xMzcwYTdlYTkwYWM0Yjk5YmFmMjIzMDUzMjMxNDA4JmRheXM9NCZxPSdcbmNvbnN0IGtleSA9ICcxMzcwYTdlYTkwYWM0Yjk5YmFmMjIzMDUzMjMxNDA4JztcblxuYXN5bmMgZnVuY3Rpb24gZ2V0RGF0YShjaXR5LHVuaXQsc2xpZGUpIHtcbiAgICBjb25zdCBVUkwgPSBiYXNlVVJMICsgY2l0eTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goVVJMLCB7bW9kZTogJ2NvcnMnfSk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgY29uc29sZS5sb2cocmVzdWx0KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCB7IGdldERhdGEgfTsiLCJpbXBvcnQgeyBnZXREYXRhIH0gZnJvbSBcIi4vZ2V0RGF0YVwiO1xuaW1wb3J0IHVwZGF0ZVBhZ2UgZnJvbSBcIi4vdXBkYXRlUGFnZVwiO1xuXG5jb25zdCB1cmwgPSBcImh0dHBzOi8vYXBpLndlYXRoZXJhcGkuY29tL3YxL2ZvcmVjYXN0Lmpzb24/a2V5PTEzNzBhN2VhOTBhYzRiOTliYWYyMjMwNTMyMzE0MDgmcT1EZWhyYWR1biZkYXlzPTNcIjtcblxuY29uc3Qgc2VhcmNoYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaGJveCcpO1xuY29uc3Qgc2VhcmNoYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaGJ1dHRvbicpO1xuXG5jb25zdCB0b2dnbGVVbml0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VuaXRzJyk7XG5cbmNvbnN0IGRhaWx5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhaWx5YnV0dG9uJyk7XG5jb25zdCBob3VybHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG91cmx5YnV0dG9uJyk7XG5cbmNvbnN0IG5hdmlnYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbicpO1xuY29uc3QgbGVmdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0Jyk7XG5jb25zdCByaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodCcpO1xuXG5jb25zdCBjaXJjbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNpcmNsZXMgaW1nJyk7XG5cbmxldCBzbGlkZSA9IDE7XG5cbmxldCB1bml0ID0gJ2NlbCc7XG5sZXQgY3VycmVudExvY2F0aW9uID0gJ2RlaHJhZHVuJztcblxubGV0IHJlc3VsdDtcblxuXG5hc3luYyBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICByZXN1bHQgPSBhd2FpdCBnZXREYXRhKGN1cnJlbnRMb2NhdGlvbix1bml0KTtcbiAgICB1cGRhdGVQYWdlKHJlc3VsdCx1bml0LHNsaWRlKTtcbn1cblxuc3RhcnQoKTtcblxuXG5zZWFyY2hidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgY3VycmVudExvY2F0aW9uID0gc2VhcmNoYm94LnZhbHVlO1xuICAgIHJlc3VsdCA9IGF3YWl0IGdldERhdGEoc2VhcmNoYm94LnZhbHVlLHVuaXQpO1xuICAgIHVwZGF0ZVBhZ2UocmVzdWx0LHVuaXQsc2xpZGUpO1xuICAgIHNlYXJjaGJveC52YWx1ZSA9IFwiXCI7XG4gICAgXG59KVxuXG5zZWFyY2hib3guYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGFzeW5jKGUpID0+IHtcbiAgICBpZihlLmtleSA9PSAnRW50ZXInKSB7XG4gICAgICAgIGN1cnJlbnRMb2NhdGlvbiA9IHNlYXJjaGJveC52YWx1ZTtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgZ2V0RGF0YShzZWFyY2hib3gudmFsdWUsdW5pdClcbiAgICAgICAgdXBkYXRlUGFnZShyZXN1bHQsdW5pdCxzbGlkZSk7XG4gICAgICAgIHNlYXJjaGJveC52YWx1ZSA9IFwiXCI7XG4gICAgfVxufSk7XG5cbnRvZ2dsZVVuaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYodW5pdCA9PSAnY2VsJykge1xuICAgICAgICB1bml0ID0gJ2Zhcic7XG4gICAgICAgIHVwZGF0ZVBhZ2UocmVzdWx0LHVuaXQsc2xpZGUpO1xuICAgICAgICB0b2dnbGVVbml0LmlubmVySFRNTCA9IFwiRGlzcGxheSDCsENcIlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdW5pdCA9ICdjZWwnO1xuICAgICAgICB1cGRhdGVQYWdlKHJlc3VsdCx1bml0LHNsaWRlKTtcbiAgICAgICAgdG9nZ2xlVW5pdC5pbm5lckhUTUwgPSBcIkRpc3BsYXkgwrBGXCJcbiAgICB9XG59KTtcblxuZGFpbHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYoIWRhaWx5LmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICBob3VybHkuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgZGFpbHkuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgdXBkYXRlUGFnZShyZXN1bHQsdW5pdCk7XG4gICAgICAgIG5hdmlnYXRpb24uc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtzbGlkZX1gKS5zcmMgPSAnYXNzZXRzL3N2Z3MvY2lyY2xlLW91dGxpbmUucG5nJztcbiAgICAgICAgc2xpZGU9MTtcbiAgICB9XG59KTtcblxuaG91cmx5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgIGlmKCFob3VybHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgIGRhaWx5LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG4gICAgICAgIGhvdXJseS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBnZXREYXRhKGN1cnJlbnRMb2NhdGlvbix1bml0LHNsaWRlKTtcbiAgICAgICAgdXBkYXRlUGFnZShyZXN1bHQsdW5pdCxzbGlkZSk7XG4gICAgICAgIG5hdmlnYXRpb24uc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7c2xpZGV9YCkuc3JjID0gJ2Fzc2V0cy9zdmdzL2NpcmNsZS5wbmcnO1xuICAgIH1cbn0pO1xuXG5sZWZ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGlmKHNsaWRlID09IDEpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7c2xpZGV9YCkuc3JjID0gJ2Fzc2V0cy9zdmdzL2NpcmNsZS1vdXRsaW5lLnBuZyc7XG4gICAgICAgIHNsaWRlID0gNDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7c2xpZGV9YCkuc3JjID0gJ2Fzc2V0cy9zdmdzL2NpcmNsZS5wbmcnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7c2xpZGV9YCkuc3JjID0gJ2Fzc2V0cy9zdmdzL2NpcmNsZS1vdXRsaW5lLnBuZyc7XG4gICAgICAgIHNsaWRlLS07XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUucG5nJztcbiAgICB9XG5cbiAgICB1cGRhdGVQYWdlKHJlc3VsdCx1bml0LHNsaWRlKTtcbn0pO1xuXG5yaWdodC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBpZihzbGlkZSA9PSA0KSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUtb3V0bGluZS5wbmcnO1xuICAgICAgICBzbGlkZSA9IDE7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUucG5nJztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUtb3V0bGluZS5wbmcnO1xuICAgICAgICBzbGlkZSsrO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtzbGlkZX1gKS5zcmMgPSAnYXNzZXRzL3N2Z3MvY2lyY2xlLnBuZyc7XG4gICAgfVxuICAgIHVwZGF0ZVBhZ2UocmVzdWx0LHVuaXQsc2xpZGUpO1xufSk7XG5cbmNpcmNsZXMuZm9yRWFjaChjaXJjbGUgPT4ge1xuICAgIGNpcmNsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7c2xpZGV9YCkuc3JjID0gJ2Fzc2V0cy9zdmdzL2NpcmNsZS1vdXRsaW5lLnBuZyc7XG4gICAgICAgIHNsaWRlID0gY2lyY2xlLmlkO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtzbGlkZX1gKS5zcmMgPSAnYXNzZXRzL3N2Z3MvY2lyY2xlLnBuZyc7XG4gICAgICAgIHVwZGF0ZVBhZ2UocmVzdWx0LHVuaXQsc2xpZGUpO1xuICAgIH0pXG59KTtcblxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJpIiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsInVwZGF0ZUljb24iLCJ3ZWF0aGVyIiwiaWNvbiIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJmb3JlY2FzdENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJob3VybHlDb250YWluZXIiLCJkYXlzT2ZXZWVrIiwiY3VycmVudFdlYXRoZXIiLCJnZXRFbGVtZW50QnlJZCIsImRhdGUiLCJ0aW1lIiwiY3VycmVudFRlbXAiLCJ0b2RheUljb24iLCJ0b2RheUhpZ2hUZW1wIiwidG9kYXlMb3dUZW1wIiwiZmVlbHNMaWtlIiwicHJlY2lwaXRhdGlvbiIsImh1bWlkaXR5Iiwid2luZCIsInByZXNzdXJlIiwic3VucmlzZSIsInN1bnNldCIsIm1vb25QaGFzZSIsImRhaWx5IiwiaG91cmx5IiwidXBkYXRlUGFnZSIsIm9iamVjdCIsInVuaXQiLCJzbGlkZSIsImlubmVySFRNTCIsImN1cnJlbnQiLCJjb25kaXRpb24iLCJ0ZXh0IiwibmFtZSIsImNvdW50cnkiLCJEYXRlIiwibGFzdF91cGRhdGVkIiwidG9EYXRlU3RyaW5nIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwic3Vic3RyaW5nIiwidGVtcF9jIiwiZm9yZWNhc3QiLCJmb3JlY2FzdGRheSIsImRheSIsIm1heHRlbXBfYyIsIm1pbnRlbXBfYyIsImZlZWxzbGlrZV9jIiwidGVtcF9mIiwibWF4dGVtcF9mIiwibWludGVtcF9mIiwiZmVlbHNsaWtlX2YiLCJkYWlseV9jaGFuY2Vfb2ZfcmFpbiIsIndpbmRfbXBoIiwid2luZF9kaXIiLCJwcmVzc3VyZV9tYiIsImFzdHJvIiwibW9vbl9waGFzZSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiY2FyZCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJnZXREYXkiLCJoaWdoIiwibG93IiwiYXBwZW5kQ2hpbGQiLCJkaXNwbGF5RGFpbHkiLCJjYXJkc0Rpc3BsYXllZCIsImN1cnJlbnRIb3VyIiwiTnVtYmVyIiwidGVtcCIsImhvdXIiLCJyZW1haW5pbmdIb3VycyIsImRpc3BsYXlIb3VybHkiLCJhc3luYyIsImdldERhdGEiLCJjaXR5IiwiVVJMIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1vZGUiLCJyZXN1bHQiLCJqc29uIiwiY29uc29sZSIsImxvZyIsInNlYXJjaGJveCIsInNlYXJjaGJ1dHRvbiIsInRvZ2dsZVVuaXQiLCJuYXZpZ2F0aW9uIiwibGVmdCIsInJpZ2h0IiwiY2lyY2xlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjdXJyZW50TG9jYXRpb24iLCJzdGFydCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ2YWx1ZSIsImtleSIsInJlbW92ZSIsImFkZCIsInN0eWxlIiwidmlzaWJpbGl0eSIsImZvckVhY2giLCJjaXJjbGUiLCJpZCJdLCJzb3VyY2VSb290IjoiIn0=