(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var c=n.getElementsByTagName("script");if(c.length)for(var a=c.length-1;a>-1&&!t;)t=c[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"9d129110dad380795766.png",n=e.p+"30b61f2d2b3761b7dd79.png",c=e.p+"763d9f709af860fa49c6.png",a=e.p+"e22a54b5b4a5ff085fc2.png",r=e.p+"dc758041c1a42a676c83.png",s=e.p+"dddc033163ec198b80e4.png",d=e.p+"9bacc13ba563765c1022.png",i=e.p+"bfa052d4ba0ad0353290.png",o=e.p+"c6ef75775cb48997b919.png",l=e.p+"c90f38a38a64ceba12de.png",m=e.p+"8af0012d8baf65a404d2.png",u=e.p+"66245a4e8b3e930e3a92.png",p=e.p+"3190cd4d6b0f6bf582f5.png",y=e.p+"e084c7323a6f30ebee93.png",g=e.p+"7e2b4db19a47e253a4ae.png";function f(e,f){(e=e.toLowerCase()).includes("sunny")||"clear"==e?f.src=y:e.includes("cloudy")?e.includes("partly")?f.src=m:f.src=n:"overcast"==e?f.src=l:e.includes("thunder")?f.src=g:e.includes("pellets")?f.src=s:"blizzard"==e?f.src=t:e.includes("fog")?f.src=r:"mist"==e?f.src=o:e.includes("rain")?e.includes("light")?f.src=c:e.includes("moderate")?f.src=i:e.includes("heavy")?f.src=d:e.includes("freezing")?f.src=a:f.src=c:e.includes("snow")?f.src=p:e.includes("sleet")&&(f.src=u)}const h=document.querySelector(".forecastcontainer"),E=document.querySelector(".hourlycontainer"),L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=document.getElementById("currentweathertext"),b=document.getElementById("location"),M=document.getElementById("date"),T=document.getElementById("time"),B=document.getElementById("currenttemp"),I=document.getElementById("todayicon"),H=document.getElementById("hightemp"),_=document.getElementById("lowtemp"),w=document.getElementById("feelslike"),C=document.getElementById("precipitationvalue"),k=document.getElementById("humidityvalue"),$=document.getElementById("windvalue"),S=document.getElementById("pressurevalue"),x=document.getElementById("sunrise"),F=document.getElementById("sunset"),D=document.getElementById("moonphase"),N=document.getElementById("dailybutton"),A=document.getElementById("hourlybutton");async function q(e,t,n){const c="https://api.weatherapi.com/v1/forecast.json?key=1370a7ea90ac4b99baf223053231408&days=4&q="+e,a=await fetch(c),r=await a.json();console.log(r),function(e,t,n){v.innerHTML=e.current.condition.text,b.innerHTML=e.location.name+", "+e.location.country,M.innerHTML=new Date(e.current.last_updated).toDateString(),T.innerHTML=new Date(e.current.last_updated).toLocaleTimeString().substring(0,5)+" (Last Updated)","cel"==t?(B.innerHTML=e.current.temp_c+"°C",H.innerHTML=e.forecast.forecastday[0].day.maxtemp_c+"°C",_.innerHTML=e.forecast.forecastday[0].day.mintemp_c+"°C",w.innerHTML=e.current.feelslike_c+"°C"):(B.innerHTML=e.current.temp_f+"°F",H.innerHTML=e.forecast.forecastday[0].day.maxtemp_f+"°F",_.innerHTML=e.forecast.forecastday[0].day.mintemp_f+"°F",w.innerHTML=e.current.feelslike_f+"°F"),C.innerHTML=e.forecast.forecastday[0].day.daily_chance_of_rain+"%",k.innerHTML=e.current.humidity+"%",$.innerHTML=e.current.wind_mph+"mph  "+e.current.wind_dir,S.innerHTML=e.current.pressure_mb+"mb",x.innerHTML=e.forecast.forecastday[0].astro.sunrise,F.innerHTML=e.forecast.forecastday[0].astro.sunset,D.innerHTML=e.forecast.forecastday[0].astro.moon_phase,f(e.current.condition.text,I),N.classList.contains("selected")&&function(e,t,n){h.innerHTML="",E.innerHTML="";for(let n=1;n<=3;n++){const c=document.createElement("div"),a=document.createElement("div");a.className="day",a.innerHTML=L[new Date(e.forecast.forecastday[n].date).getDay()];const r=document.createElement("div");r.className="high";const s=document.createElement("div");s.className="low";const d=document.createElement("img");"cel"==t?(r.innerHTML=e.forecast.forecastday[n].day.maxtemp_c+"°C",s.innerHTML=e.forecast.forecastday[n].day.mintemp_c+"°C"):(r.innerHTML=e.forecast.forecastday[n].day.maxtemp_f+"°F",s.innerHTML=e.forecast.forecastday[n].day.mintemp_f+"°F"),f(e.forecast.forecastday[n].day.condition.text,d),c.appendChild(a),c.appendChild(r),c.appendChild(s),c.appendChild(d),h.appendChild(c)}}(e,t),A.classList.contains("selected")&&function(e,t,n){let c=1,a=!1;h.innerHTML="",E.innerHTML="";let r=new Date(e.current.last_updated).toLocaleTimeString().substring(0,2);for(r=Number(r);;){for(let s=r+6*(n-1);s<=23;s++){const n=document.createElement("div"),r=document.createElement("div");r.innerHTML=0==s?"12:00 AM":s<=12?s+":00 AM":s-12+":00 PM";const d=document.createElement("div");d.className="high",d.innerHTML="cel"==t?e.forecast.forecastday[0].hour[s].temp_c+"°C":e.forecast.forecastday[0].hour[s].temp_f+"°F";const i=document.createElement("img");if(f(e.forecast.forecastday[0].hour[s].condition.text,i),n.appendChild(r),n.appendChild(d),n.appendChild(i),E.appendChild(n),6==c){a=!0;break}c++}if(a)break;let s=r+6*(n-1)-24;s<0&&(s=0);for(let n=0+s;n<=23;n++){const r=document.createElement("div"),s=document.createElement("div");s.innerHTML=0==n?"12:00 AM":n<=12?n+":00 AM":n-12+":00 PM";const d=document.createElement("div");d.className="high",d.innerHTML="cel"==t?e.forecast.forecastday[1].hour[n].temp_c+"°C":e.forecast.forecastday[1].hour[n].temp_f+"°F";const i=document.createElement("img");if(f(e.forecast.forecastday[1].hour[n].condition.text,i),r.appendChild(s),r.appendChild(d),r.appendChild(i),E.appendChild(r),6==c){a=!0;break}c++}if(a)break}}(e,t,n)}(r,t,n)}const j=document.getElementById("searchbox"),z=document.getElementById("searchbutton"),P=document.getElementById("units"),U=document.getElementById("dailybutton"),W=document.getElementById("hourlybutton"),G=document.querySelector(".navigation"),J=document.getElementById("left"),K=document.getElementById("right"),O=document.querySelectorAll(".circles img");let Q=1,R="cel",V="dehradun";q("dehradun",R),z.addEventListener("click",(()=>{V=j.value,q(j.value,R),j.value=""})),j.addEventListener("keydown",(e=>{"Enter"==e.key&&(V=j.value,q(j.value,R),j.value="")})),P.addEventListener("click",(()=>{"cel"==R?(R="far",q(V,R,Q),P.innerHTML="Display °C"):(R="cel",q(V,R,Q),P.innerHTML="Display °F")})),U.addEventListener("click",(()=>{U.classList.contains("selected")||(W.classList.remove("selected"),U.classList.add("selected"),q(V,R),G.style.visibility="hidden",Q=1)})),W.addEventListener("click",(()=>{W.classList.contains("selected")||(U.classList.remove("selected"),W.classList.add("selected"),q(V,R,Q),G.style.visibility="visible",Q=1)})),J.addEventListener("click",(()=>{1==Q?(document.getElementById(`${Q}`).src="assets/svgs/circle-outline.png",Q=4,document.getElementById(`${Q}`).src="assets/svgs/circle.png"):(document.getElementById(`${Q}`).src="assets/svgs/circle-outline.png",Q--,document.getElementById(`${Q}`).src="assets/svgs/circle.png"),q(V,R,Q)})),K.addEventListener("click",(()=>{4==Q?(document.getElementById(`${Q}`).src="assets/svgs/circle-outline.png",Q=1,document.getElementById(`${Q}`).src="assets/svgs/circle.png"):(document.getElementById(`${Q}`).src="assets/svgs/circle-outline.png",Q++,document.getElementById(`${Q}`).src="assets/svgs/circle.png"),q(V,R,Q)})),O.forEach((e=>{e.addEventListener("click",(()=>{document.getElementById(`${Q}`).src="assets/svgs/circle-outline.png",Q=e.id,document.getElementById(`${Q}`).src="assets/svgs/circle.png",q(V,R,Q)}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFlBQ3ZCLEVBQU8vQixVQUFVZ0MsSUFBSSxZQUNyQnhFLEVBQVFtRSxFQUFnQmpFLEVBQUtDLEdBQzdCMkQsRUFBV1csTUFBTUMsV0FBYSxVQUM5QnZFLEVBQVEsRUFDWixJQUdKNEQsRUFBS0ssaUJBQWlCLFNBQVMsS0FDZixHQUFUakUsR0FDQ3pDLFNBQVNvQixlQUFlLEdBQUdxQixLQUFTdkMsSUFBTSxpQ0FDMUN1QyxFQUFRLEVBQ1J6QyxTQUFTb0IsZUFBZSxHQUFHcUIsS0FBU3ZDLElBQU0sMkJBRzFDRixTQUFTb0IsZUFBZSxHQUFHcUIsS0FBU3ZDLElBQU0saUNBQzFDdUMsSUFDQXpDLFNBQVNvQixlQUFlLEdBQUdxQixLQUFTdkMsSUFBTSwwQkFHOUNvQyxFQUFRbUUsRUFBZ0JqRSxFQUFLQyxFQUFNLElBR3ZDNkQsRUFBTUksaUJBQWlCLFNBQVMsS0FDaEIsR0FBVGpFLEdBQ0N6QyxTQUFTb0IsZUFBZSxHQUFHcUIsS0FBU3ZDLElBQU0saUNBQzFDdUMsRUFBUSxFQUNSekMsU0FBU29CLGVBQWUsR0FBR3FCLEtBQVN2QyxJQUFNLDJCQUcxQ0YsU0FBU29CLGVBQWUsR0FBR3FCLEtBQVN2QyxJQUFNLGlDQUMxQ3VDLElBQ0F6QyxTQUFTb0IsZUFBZSxHQUFHcUIsS0FBU3ZDLElBQU0sMEJBRTlDb0MsRUFBUW1FLEVBQWdCakUsRUFBS0MsRUFBTSxJQUd2QzhELEVBQVFVLFNBQVFDLElBQ1pBLEVBQU9SLGlCQUFpQixTQUFTLEtBQzdCMUcsU0FBU29CLGVBQWUsR0FBR3FCLEtBQVN2QyxJQUFNLGlDQUMxQ3VDLEVBQVF5RSxFQUFPQyxHQUNmbkgsU0FBU29CLGVBQWUsR0FBR3FCLEtBQVN2QyxJQUFNLHlCQUMxQ29DLEVBQVFtRSxFQUFnQmpFLEVBQUtDLEVBQU0sR0FDdEMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYXRoZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2VhdGhlci93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3dlYXRoZXIvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2VhdGhlci8uL3NyYy91cGRhdGVJY29uLmpzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvZGlzcGxheUZvcmVjYXN0LmpzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvdXBkYXRlUGFnZS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLy4vc3JjL2dldERhdGEuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7XG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGkgPSBzY3JpcHRzLmxlbmd0aCAtIDE7XG5cdFx0XHR3aGlsZSAoaSA+IC0xICYmICFzY3JpcHRVcmwpIHNjcmlwdFVybCA9IHNjcmlwdHNbaS0tXS5zcmM7XG5cdFx0fVxuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJpbXBvcnQgYmxpenphcmQgZnJvbSAnLi9pbWFnZXMvaWNvbnMvYmxpenphcmQucG5nJztcbmltcG9ydCBjbG91ZHkgZnJvbSAnLi9pbWFnZXMvaWNvbnMvY2xvdWR5LnBuZyc7XG5pbXBvcnQgZHJpenpsZSBmcm9tICcuL2ltYWdlcy9pY29ucy9kcml6emxlLnBuZyc7XG5pbXBvcnQgZnJlZXppbmdEcml6emxlIGZyb20gJy4vaW1hZ2VzL2ljb25zL2ZyZWV6aW5nLWRyaXp6bGUucG5nJztcbmltcG9ydCBmb2cgZnJvbSAnLi9pbWFnZXMvaWNvbnMvZm9nLnBuZyc7XG5pbXBvcnQgaGFpbCBmcm9tICcuL2ltYWdlcy9pY29ucy9oYWlsLnBuZyc7XG5pbXBvcnQgaGVhdnlSYWluIGZyb20gJy4vaW1hZ2VzL2ljb25zL2hlYXZ5LXJhaW4ucG5nJztcbmltcG9ydCBtb2RlcmF0ZVJhaW4gZnJvbSAnLi9pbWFnZXMvaWNvbnMvbGlnaHQtcmFpbi5wbmcnO1xuaW1wb3J0IG1pc3QgZnJvbSAnLi9pbWFnZXMvaWNvbnMvbWlzdC5wbmcnO1xuaW1wb3J0IG92ZXJjYXN0IGZyb20gJy4vaW1hZ2VzL2ljb25zL292ZXJjYXN0LnBuZyc7XG5pbXBvcnQgcGFydGx5Q2xvdWR5IGZyb20gJy4vaW1hZ2VzL2ljb25zL3BhcnRseS1jbG91ZHkucG5nJztcbmltcG9ydCBzbGVldCBmcm9tICcuL2ltYWdlcy9pY29ucy9zbGVldC5wbmcnO1xuaW1wb3J0IHNub3cgZnJvbSAnLi9pbWFnZXMvaWNvbnMvc25vd2ZhbGwucG5nJztcbmltcG9ydCBzdW4gZnJvbSAnLi9pbWFnZXMvaWNvbnMvc3VubnkucG5nJztcbmltcG9ydCB0aHVuZGVyIGZyb20gJy4vaW1hZ2VzL2ljb25zL3RodW5kZXIucG5nJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXBkYXRlSWNvbih3ZWF0aGVyLCBpY29uKSB7XG4gICAgd2VhdGhlciA9IHdlYXRoZXIudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCdzdW5ueScpIHx8IHdlYXRoZXIgPT0gJ2NsZWFyJylcbiAgICAgICAgaWNvbi5zcmMgPSBzdW47XG4gICAgZWxzZSBpZiAod2VhdGhlci5pbmNsdWRlcygnY2xvdWR5JykpIHtcbiAgICAgICAgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ3BhcnRseScpKVxuICAgICAgICAgICAgaWNvbi5zcmMgPSBwYXJ0bHlDbG91ZHk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGljb24uc3JjID0gY2xvdWR5O1xuICAgIH1cbiAgICBlbHNlIGlmICh3ZWF0aGVyID09ICdvdmVyY2FzdCcpXG4gICAgICAgIGljb24uc3JjID0gb3ZlcmNhc3Q7XG4gICAgZWxzZSBpZiAod2VhdGhlci5pbmNsdWRlcygndGh1bmRlcicpKVxuICAgICAgICBpY29uLnNyYyA9IHRodW5kZXI7XG4gICAgZWxzZSBpZiAod2VhdGhlci5pbmNsdWRlcygncGVsbGV0cycpKVxuICAgICAgICBpY29uLnNyYyA9IGhhaWw7XG4gICAgZWxzZSBpZiAod2VhdGhlciA9PSAnYmxpenphcmQnKVxuICAgICAgICBpY29uLnNyYyA9IGJsaXp6YXJkO1xuICAgIGVsc2UgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ2ZvZycpKVxuICAgICAgICBpY29uLnNyYyA9IGZvZztcbiAgICBlbHNlIGlmICh3ZWF0aGVyID09ICdtaXN0JylcbiAgICAgICAgaWNvbi5zcmMgPSBtaXN0O1xuICAgIGVsc2UgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ3JhaW4nIHx8IHdlYXRoZXIuaW5jbHVkZXMoJ2RyaXp6bGUnKSkpIHtcbiAgICAgICAgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ2xpZ2h0JykpXG4gICAgICAgICAgICBpY29uLnNyYyA9IGRyaXp6bGU7XG4gICAgICAgIGVsc2UgaWYgKHdlYXRoZXIuaW5jbHVkZXMoJ21vZGVyYXRlJykpXG4gICAgICAgICAgICBpY29uLnNyYyA9IG1vZGVyYXRlUmFpbjtcbiAgICAgICAgZWxzZSBpZiAod2VhdGhlci5pbmNsdWRlcygnaGVhdnknKSlcbiAgICAgICAgICAgIGljb24uc3JjID0gaGVhdnlSYWluO1xuICAgICAgICBlbHNlIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCdmcmVlemluZycpKVxuICAgICAgICAgICAgaWNvbi5zcmMgPSBmcmVlemluZ0RyaXp6bGU7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGljb24uc3JjID0gZHJpenpsZTtcbiAgICB9XG5cbiAgICBlbHNlIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCdzbm93JykpXG4gICAgICAgIGljb24uc3JjID0gc25vdztcbiAgICBlbHNlIGlmICh3ZWF0aGVyLmluY2x1ZGVzKCdzbGVldCcpKVxuICAgICAgICBpY29uLnNyYyA9IHNsZWV0O1xuXG59IiwiaW1wb3J0IHVwZGF0ZUljb24gZnJvbSBcIi4vdXBkYXRlSWNvblwiO1xuXG5jb25zdCBmb3JlY2FzdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JlY2FzdGNvbnRhaW5lcicpO1xuY29uc3QgaG91cmx5Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvdXJseWNvbnRhaW5lcicpO1xuXG5jb25zdCBkYXlzT2ZXZWVrID0gW1wiU3VuZGF5XCIsIFwiTW9uZGF5XCIsIFwiVHVlc2RheVwiLCBcIldlZG5lc2RheVwiLCBcIlRodXJzZGF5XCIsIFwiRnJpZGF5XCIsIFwiU2F0dXJkYXlcIl07XG5cbmZ1bmN0aW9uIGRpc3BsYXlEYWlseShvYmplY3QsdW5pdCxzbGlkZSkge1xuICAgIGZvcmVjYXN0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgaG91cmx5Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICBmb3IobGV0IGk9MTsgaTw9MzsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gICAgICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkYXkuY2xhc3NOYW1lID0gJ2RheSc7XG4gICAgICAgIGRheS5pbm5lckhUTUwgPSBkYXlzT2ZXZWVrW25ldyBEYXRlKG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVtpXS5kYXRlKS5nZXREYXkoKV07XG5cbiAgICAgICAgY29uc3QgaGlnaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBoaWdoLmNsYXNzTmFtZSA9ICdoaWdoJztcblxuICAgICAgICBjb25zdCBsb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbG93LmNsYXNzTmFtZSA9ICdsb3cnO1xuXG4gICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblxuICAgICAgICBpZiAodW5pdCA9PSAnY2VsJykge1xuICAgICAgICAgICAgaGlnaC5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uZGF5Lm1heHRlbXBfYyArICfCsEMnO1xuICAgICAgICAgICAgbG93LmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVtpXS5kYXkubWludGVtcF9jICsgJ8KwQyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoaWdoLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVtpXS5kYXkubWF4dGVtcF9mICsgJ8KwRic7XG4gICAgICAgICAgICBsb3cuaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmRheS5taW50ZW1wX2YgKyAnwrBGJztcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZUljb24ob2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmRheS5jb25kaXRpb24udGV4dCwgaWNvbik7XG5cbiAgICAgICAgY2FyZC5hcHBlbmRDaGlsZChkYXkpO1xuICAgICAgICBjYXJkLmFwcGVuZENoaWxkKGhpZ2gpO1xuICAgICAgICBjYXJkLmFwcGVuZENoaWxkKGxvdyk7XG4gICAgICAgIGNhcmQuYXBwZW5kQ2hpbGQoaWNvbik7XG5cbiAgICAgICAgZm9yZWNhc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkaXNwbGF5SG91cmx5KG9iamVjdCx1bml0LHNsaWRlKSB7XG4gICAgbGV0IGNhcmRzRGlzcGxheWVkID0gMTtcbiAgICBsZXQgY29tcGxldGVkID0gZmFsc2U7XG4gICAgZm9yZWNhc3RDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBob3VybHlDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBcbiAgICBsZXQgY3VycmVudEhvdXIgPSAobmV3IERhdGUob2JqZWN0LmN1cnJlbnQubGFzdF91cGRhdGVkKSkudG9Mb2NhbGVUaW1lU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDIpO1xuICAgIGN1cnJlbnRIb3VyID0gTnVtYmVyKGN1cnJlbnRIb3VyKTtcblxuICAgIHdoaWxlKHRydWUpIHtcbiAgICAgICAgZm9yKGxldCBpPWN1cnJlbnRIb3VyICsgKHNsaWRlLTEpKjY7IGk8PTIzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGlmKGk9PTApXG4gICAgICAgICAgICAgICAgdGltZS5pbm5lckhUTUwgPSBcIjEyOjAwIEFNXCI7XG4gICAgICAgICAgICBlbHNlIGlmKGk8PTEyKVxuICAgICAgICAgICAgICAgIHRpbWUuaW5uZXJIVE1MID0gaSArIFwiOjAwIEFNXCI7XG4gICAgICAgICAgICBlbHNlIFxuICAgICAgICAgICAgICAgIHRpbWUuaW5uZXJIVE1MID0gKGktMTIpICsgXCI6MDAgUE1cIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdGVtcC5jbGFzc05hbWUgPSAnaGlnaCc7XG4gICAgXG4gICAgICAgICAgICBpZih1bml0ID09ICdjZWwnKSB7XG4gICAgICAgICAgICAgICAgdGVtcC5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uaG91cltpXS50ZW1wX2MgKyAnwrBDJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgXG4gICAgICAgICAgICAgICAgdGVtcC5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uaG91cltpXS50ZW1wX2YgKyAnwrBGJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIFxuICAgICAgICAgICAgdXBkYXRlSWNvbihvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uaG91cltpXS5jb25kaXRpb24udGV4dCwgaWNvbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhcmQuYXBwZW5kQ2hpbGQodGltZSk7XG4gICAgICAgICAgICBjYXJkLmFwcGVuZENoaWxkKHRlbXApO1xuICAgICAgICAgICAgY2FyZC5hcHBlbmRDaGlsZChpY29uKTtcbiAgICBcbiAgICAgICAgICAgIGhvdXJseUNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoY2FyZHNEaXNwbGF5ZWQgPT0gNikge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZD10cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FyZHNEaXNwbGF5ZWQrKztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGNvbXBsZXRlZClcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGxldCByZW1haW5pbmdIb3VycyA9IGN1cnJlbnRIb3VyICsgKHNsaWRlLTEpKjYgLSAyNDtcblxuICAgICAgICBpZihyZW1haW5pbmdIb3VyczwwKVxuICAgICAgICAgICAgcmVtYWluaW5nSG91cnMgPSAwO1xuXG4gICAgICAgIGZvcihsZXQgaT0wICsgcmVtYWluaW5nSG91cnM7IGk8PTIzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGlmKGk9PTApXG4gICAgICAgICAgICAgICAgdGltZS5pbm5lckhUTUwgPSBcIjEyOjAwIEFNXCI7XG4gICAgICAgICAgICBlbHNlIGlmKGk8PTEyKVxuICAgICAgICAgICAgICAgIHRpbWUuaW5uZXJIVE1MID0gaSArIFwiOjAwIEFNXCI7XG4gICAgICAgICAgICBlbHNlIFxuICAgICAgICAgICAgICAgIHRpbWUuaW5uZXJIVE1MID0gKGktMTIpICsgXCI6MDAgUE1cIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdGVtcC5jbGFzc05hbWUgPSAnaGlnaCc7XG4gICAgXG4gICAgICAgICAgICBpZih1bml0ID09ICdjZWwnKSB7XG4gICAgICAgICAgICAgICAgdGVtcC5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMV0uaG91cltpXS50ZW1wX2MgKyAnwrBDJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgXG4gICAgICAgICAgICAgICAgdGVtcC5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMV0uaG91cltpXS50ZW1wX2YgKyAnwrBGJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIFxuICAgICAgICAgICAgdXBkYXRlSWNvbihvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMV0uaG91cltpXS5jb25kaXRpb24udGV4dCwgaWNvbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhcmQuYXBwZW5kQ2hpbGQodGltZSk7XG4gICAgICAgICAgICBjYXJkLmFwcGVuZENoaWxkKHRlbXApO1xuICAgICAgICAgICAgY2FyZC5hcHBlbmRDaGlsZChpY29uKTtcbiAgICBcbiAgICAgICAgICAgIGhvdXJseUNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICBcbiAgICAgICAgICAgIGlmKGNhcmRzRGlzcGxheWVkID09IDYpIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQ9dHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhcmRzRGlzcGxheWVkKys7XG4gICAgICAgIH1cblxuICAgICAgICBpZihjb21wbGV0ZWQpXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgXG59XG5cbmV4cG9ydCB7IGRpc3BsYXlEYWlseSxkaXNwbGF5SG91cmx5IH07IiwiaW1wb3J0IHsgZGlzcGxheURhaWx5LCBkaXNwbGF5SG91cmx5IH0gZnJvbSBcIi4vZGlzcGxheUZvcmVjYXN0XCI7XG5pbXBvcnQgdXBkYXRlSWNvbiBmcm9tIFwiLi91cGRhdGVJY29uXCI7XG5cbmNvbnN0IGN1cnJlbnRXZWF0aGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnR3ZWF0aGVydGV4dCcpO1xuY29uc3QgbG9jYXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9jYXRpb24nKTtcblxuY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRlJyk7XG5jb25zdCB0aW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUnKTtcblxuY29uc3QgY3VycmVudFRlbXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudHRlbXAnKTtcbmNvbnN0IHRvZGF5SWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RheWljb24nKTtcblxuY29uc3QgdG9kYXlIaWdoVGVtcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaWdodGVtcCcpO1xuY29uc3QgdG9kYXlMb3dUZW1wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvd3RlbXAnKTtcbmNvbnN0IGZlZWxzTGlrZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmZWVsc2xpa2UnKTtcblxuY29uc3QgcHJlY2lwaXRhdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmVjaXBpdGF0aW9udmFsdWUnKTtcbmNvbnN0IGh1bWlkaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2h1bWlkaXR5dmFsdWUnKTtcbmNvbnN0IHdpbmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2luZHZhbHVlJyk7XG5jb25zdCBwcmVzc3VyZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmVzc3VyZXZhbHVlJyk7XG5cbmNvbnN0IHN1bnJpc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VucmlzZScpO1xuY29uc3Qgc3Vuc2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1bnNldCcpO1xuY29uc3QgbW9vblBoYXNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vb25waGFzZScpO1xuXG5jb25zdCBkYWlseSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYWlseWJ1dHRvbicpO1xuY29uc3QgaG91cmx5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvdXJseWJ1dHRvbicpO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXBkYXRlUGFnZShvYmplY3QsIHVuaXQsIHNsaWRlKSB7XG4gICAgbGV0IGkgPSAxO1xuICAgIGN1cnJlbnRXZWF0aGVyLmlubmVySFRNTCA9IG9iamVjdC5jdXJyZW50LmNvbmRpdGlvbi50ZXh0O1xuICAgIGxvY2F0aW9uLmlubmVySFRNTCA9IG9iamVjdC5sb2NhdGlvbi5uYW1lICsgXCIsIFwiICsgb2JqZWN0LmxvY2F0aW9uLmNvdW50cnk7XG5cbiAgICBkYXRlLmlubmVySFRNTCA9IChuZXcgRGF0ZShvYmplY3QuY3VycmVudC5sYXN0X3VwZGF0ZWQpKS50b0RhdGVTdHJpbmcoKTtcbiAgICB0aW1lLmlubmVySFRNTCA9IChuZXcgRGF0ZShvYmplY3QuY3VycmVudC5sYXN0X3VwZGF0ZWQpKS50b0xvY2FsZVRpbWVTdHJpbmcoKS5zdWJzdHJpbmcoMCwgNSkgKyBcIiAoTGFzdCBVcGRhdGVkKVwiO1xuXG4gICAgaWYgKHVuaXQgPT0gJ2NlbCcpIHtcbiAgICAgICAgY3VycmVudFRlbXAuaW5uZXJIVE1MID0gb2JqZWN0LmN1cnJlbnQudGVtcF9jICsgJ8KwQyc7XG5cbiAgICAgICAgdG9kYXlIaWdoVGVtcC5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uZGF5Lm1heHRlbXBfYyArICfCsEMnO1xuICAgICAgICB0b2RheUxvd1RlbXAuaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5WzBdLmRheS5taW50ZW1wX2MgKyAnwrBDJztcbiAgICAgICAgZmVlbHNMaWtlLmlubmVySFRNTCA9IG9iamVjdC5jdXJyZW50LmZlZWxzbGlrZV9jICsgJ8KwQyc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjdXJyZW50VGVtcC5pbm5lckhUTUwgPSBvYmplY3QuY3VycmVudC50ZW1wX2YgKyAnwrBGJztcblxuICAgICAgICB0b2RheUhpZ2hUZW1wLmlubmVySFRNTCA9IG9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5kYXkubWF4dGVtcF9mICsgJ8KwRic7XG4gICAgICAgIHRvZGF5TG93VGVtcC5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uZGF5Lm1pbnRlbXBfZiArICfCsEYnO1xuICAgICAgICBmZWVsc0xpa2UuaW5uZXJIVE1MID0gb2JqZWN0LmN1cnJlbnQuZmVlbHNsaWtlX2YgKyAnwrBGJztcbiAgICB9XG5cblxuICAgIHByZWNpcGl0YXRpb24uaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5WzBdLmRheS5kYWlseV9jaGFuY2Vfb2ZfcmFpbiArICclJztcbiAgICBodW1pZGl0eS5pbm5lckhUTUwgPSBvYmplY3QuY3VycmVudC5odW1pZGl0eSArIFwiJVwiO1xuICAgIHdpbmQuaW5uZXJIVE1MID0gb2JqZWN0LmN1cnJlbnQud2luZF9tcGggKyAnbXBoICAnICsgb2JqZWN0LmN1cnJlbnQud2luZF9kaXI7XG4gICAgcHJlc3N1cmUuaW5uZXJIVE1MID0gb2JqZWN0LmN1cnJlbnQucHJlc3N1cmVfbWIgKyAnbWInO1xuXG4gICAgc3VucmlzZS5pbm5lckhUTUwgPSBvYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uYXN0cm8uc3VucmlzZTtcbiAgICBzdW5zZXQuaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5WzBdLmFzdHJvLnN1bnNldDtcbiAgICBtb29uUGhhc2UuaW5uZXJIVE1MID0gb2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0ZGF5WzBdLmFzdHJvLm1vb25fcGhhc2U7XG5cbiAgICB1cGRhdGVJY29uKG9iamVjdC5jdXJyZW50LmNvbmRpdGlvbi50ZXh0LCB0b2RheUljb24pO1xuXG4gICAgaWYoZGFpbHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgIGRpc3BsYXlEYWlseShvYmplY3QsdW5pdCxzbGlkZSk7XG4gICAgfVxuXG4gICAgaWYoaG91cmx5LmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSlcbiAgICAgICAgZGlzcGxheUhvdXJseShvYmplY3QsdW5pdCxzbGlkZSk7XG59IiwiaW1wb3J0IHVwZGF0ZVBhZ2UgZnJvbSBcIi4vdXBkYXRlUGFnZVwiO1xuXG5jb25zdCBiYXNlVVJMID0gJ2h0dHBzOi8vYXBpLndlYXRoZXJhcGkuY29tL3YxL2ZvcmVjYXN0Lmpzb24/a2V5PTEzNzBhN2VhOTBhYzRiOTliYWYyMjMwNTMyMzE0MDgmZGF5cz00JnE9J1xuY29uc3Qga2V5ID0gJzEzNzBhN2VhOTBhYzRiOTliYWYyMjMwNTMyMzE0MDgnO1xuXG5hc3luYyBmdW5jdGlvbiBnZXREYXRhKGNpdHksdW5pdCxzbGlkZSkge1xuICAgIGNvbnN0IFVSTCA9IGJhc2VVUkwgKyBjaXR5O1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChVUkwpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cbiAgICB1cGRhdGVQYWdlKHJlc3VsdCx1bml0LHNsaWRlKTtcbn1cblxuZXhwb3J0IHsgZ2V0RGF0YSB9OyIsImltcG9ydCB7IGdldERhdGEgfSBmcm9tIFwiLi9nZXREYXRhXCI7XG5cbmNvbnN0IHVybCA9IFwiaHR0cHM6Ly9hcGkud2VhdGhlcmFwaS5jb20vdjEvZm9yZWNhc3QuanNvbj9rZXk9MTM3MGE3ZWE5MGFjNGI5OWJhZjIyMzA1MzIzMTQwOCZxPURlaHJhZHVuJmRheXM9M1wiO1xuXG5jb25zdCBzZWFyY2hib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoYm94Jyk7XG5jb25zdCBzZWFyY2hidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoYnV0dG9uJyk7XG5cbmNvbnN0IHRvZ2dsZVVuaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndW5pdHMnKTtcblxuY29uc3QgZGFpbHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFpbHlidXR0b24nKTtcbmNvbnN0IGhvdXJseSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob3VybHlidXR0b24nKTtcblxuY29uc3QgbmF2aWdhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uJyk7XG5jb25zdCBsZWZ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnQnKTtcbmNvbnN0IHJpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0Jyk7XG5cbmNvbnN0IGNpcmNsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2lyY2xlcyBpbWcnKTtcblxubGV0IHNsaWRlID0gMTtcblxubGV0IHVuaXQgPSAnY2VsJztcbmxldCBjdXJyZW50TG9jYXRpb24gPSAnZGVocmFkdW4nO1xuXG5nZXREYXRhKCdkZWhyYWR1bicsdW5pdCk7XG5cbnNlYXJjaGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjdXJyZW50TG9jYXRpb24gPSBzZWFyY2hib3gudmFsdWU7XG4gICAgZ2V0RGF0YShzZWFyY2hib3gudmFsdWUsdW5pdCk7XG4gICAgc2VhcmNoYm94LnZhbHVlID0gXCJcIjtcbn0pXG5cbnNlYXJjaGJveC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICBpZihlLmtleSA9PSAnRW50ZXInKSB7XG4gICAgICAgIGN1cnJlbnRMb2NhdGlvbiA9IHNlYXJjaGJveC52YWx1ZTtcbiAgICAgICAgZ2V0RGF0YShzZWFyY2hib3gudmFsdWUsdW5pdCk7XG4gICAgICAgIHNlYXJjaGJveC52YWx1ZSA9IFwiXCI7XG4gICAgfVxufSk7XG5cbnRvZ2dsZVVuaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYodW5pdCA9PSAnY2VsJykge1xuICAgICAgICB1bml0ID0gJ2Zhcic7XG4gICAgICAgIGdldERhdGEoY3VycmVudExvY2F0aW9uLHVuaXQsc2xpZGUpO1xuICAgICAgICB0b2dnbGVVbml0LmlubmVySFRNTCA9IFwiRGlzcGxheSDCsENcIlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdW5pdCA9ICdjZWwnO1xuICAgICAgICBnZXREYXRhKGN1cnJlbnRMb2NhdGlvbix1bml0LHNsaWRlKTtcbiAgICAgICAgdG9nZ2xlVW5pdC5pbm5lckhUTUwgPSBcIkRpc3BsYXkgwrBGXCJcbiAgICB9XG59KTtcblxuZGFpbHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYoIWRhaWx5LmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICBob3VybHkuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgZGFpbHkuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgZ2V0RGF0YShjdXJyZW50TG9jYXRpb24sdW5pdCk7XG4gICAgICAgIG5hdmlnYXRpb24uc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICBzbGlkZT0xO1xuICAgIH1cbn0pO1xuXG5ob3VybHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYoIWhvdXJseS5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgZGFpbHkuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgaG91cmx5LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgIGdldERhdGEoY3VycmVudExvY2F0aW9uLHVuaXQsc2xpZGUpO1xuICAgICAgICBuYXZpZ2F0aW9uLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIHNsaWRlID0gMTtcbiAgICB9XG59KTtcblxubGVmdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBpZihzbGlkZSA9PSAxKSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUtb3V0bGluZS5wbmcnO1xuICAgICAgICBzbGlkZSA9IDQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUucG5nJztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUtb3V0bGluZS5wbmcnO1xuICAgICAgICBzbGlkZS0tO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtzbGlkZX1gKS5zcmMgPSAnYXNzZXRzL3N2Z3MvY2lyY2xlLnBuZyc7XG4gICAgfVxuXG4gICAgZ2V0RGF0YShjdXJyZW50TG9jYXRpb24sdW5pdCxzbGlkZSk7XG59KTtcblxucmlnaHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYoc2xpZGUgPT0gNCkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtzbGlkZX1gKS5zcmMgPSAnYXNzZXRzL3N2Z3MvY2lyY2xlLW91dGxpbmUucG5nJztcbiAgICAgICAgc2xpZGUgPSAxO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtzbGlkZX1gKS5zcmMgPSAnYXNzZXRzL3N2Z3MvY2lyY2xlLnBuZyc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtzbGlkZX1gKS5zcmMgPSAnYXNzZXRzL3N2Z3MvY2lyY2xlLW91dGxpbmUucG5nJztcbiAgICAgICAgc2xpZGUrKztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7c2xpZGV9YCkuc3JjID0gJ2Fzc2V0cy9zdmdzL2NpcmNsZS5wbmcnO1xuICAgIH1cbiAgICBnZXREYXRhKGN1cnJlbnRMb2NhdGlvbix1bml0LHNsaWRlKTtcbn0pO1xuXG5jaXJjbGVzLmZvckVhY2goY2lyY2xlID0+IHtcbiAgICBjaXJjbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3NsaWRlfWApLnNyYyA9ICdhc3NldHMvc3Zncy9jaXJjbGUtb3V0bGluZS5wbmcnO1xuICAgICAgICBzbGlkZSA9IGNpcmNsZS5pZDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7c2xpZGV9YCkuc3JjID0gJ2Fzc2V0cy9zdmdzL2NpcmNsZS5wbmcnO1xuICAgICAgICBnZXREYXRhKGN1cnJlbnRMb2NhdGlvbix1bml0LHNsaWRlKTtcbiAgICB9KVxufSk7XG5cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiaSIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJ1cGRhdGVJY29uIiwid2VhdGhlciIsImljb24iLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiZm9yZWNhc3RDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiaG91cmx5Q29udGFpbmVyIiwiZGF5c09mV2VlayIsImN1cnJlbnRXZWF0aGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJkYXRlIiwidGltZSIsImN1cnJlbnRUZW1wIiwidG9kYXlJY29uIiwidG9kYXlIaWdoVGVtcCIsInRvZGF5TG93VGVtcCIsImZlZWxzTGlrZSIsInByZWNpcGl0YXRpb24iLCJodW1pZGl0eSIsIndpbmQiLCJwcmVzc3VyZSIsInN1bnJpc2UiLCJzdW5zZXQiLCJtb29uUGhhc2UiLCJkYWlseSIsImhvdXJseSIsImFzeW5jIiwiZ2V0RGF0YSIsImNpdHkiLCJ1bml0Iiwic2xpZGUiLCJVUkwiLCJyZXNwb25zZSIsImZldGNoIiwicmVzdWx0IiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJvYmplY3QiLCJpbm5lckhUTUwiLCJjdXJyZW50IiwiY29uZGl0aW9uIiwidGV4dCIsIm5hbWUiLCJjb3VudHJ5IiwiRGF0ZSIsImxhc3RfdXBkYXRlZCIsInRvRGF0ZVN0cmluZyIsInRvTG9jYWxlVGltZVN0cmluZyIsInN1YnN0cmluZyIsInRlbXBfYyIsImZvcmVjYXN0IiwiZm9yZWNhc3RkYXkiLCJkYXkiLCJtYXh0ZW1wX2MiLCJtaW50ZW1wX2MiLCJmZWVsc2xpa2VfYyIsInRlbXBfZiIsIm1heHRlbXBfZiIsIm1pbnRlbXBfZiIsImZlZWxzbGlrZV9mIiwiZGFpbHlfY2hhbmNlX29mX3JhaW4iLCJ3aW5kX21waCIsIndpbmRfZGlyIiwicHJlc3N1cmVfbWIiLCJhc3RybyIsIm1vb25fcGhhc2UiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImNhcmQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiZ2V0RGF5IiwiaGlnaCIsImxvdyIsImFwcGVuZENoaWxkIiwiZGlzcGxheURhaWx5IiwiY2FyZHNEaXNwbGF5ZWQiLCJjb21wbGV0ZWQiLCJjdXJyZW50SG91ciIsIk51bWJlciIsInRlbXAiLCJob3VyIiwicmVtYWluaW5nSG91cnMiLCJkaXNwbGF5SG91cmx5IiwidXBkYXRlUGFnZSIsInNlYXJjaGJveCIsInNlYXJjaGJ1dHRvbiIsInRvZ2dsZVVuaXQiLCJuYXZpZ2F0aW9uIiwibGVmdCIsInJpZ2h0IiwiY2lyY2xlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjdXJyZW50TG9jYXRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwidmFsdWUiLCJrZXkiLCJyZW1vdmUiLCJhZGQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJmb3JFYWNoIiwiY2lyY2xlIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9